"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[723],{63112:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(72348),l=t.n(a),r=(t(4434),t(44414));const i=e=>(0,r.jsx)(r.Fragment,{children:e.showTimeSelectOnly?(0,r.jsx)(l(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:s=>e.onChange(s),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:"hh:mm",className:"form-control",minDate:e.minDate,scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,maxDate:e.maxDate,disabled:e.disabled,monthsShown:e.monthsShown,wrapperClassName:"is-invalid",showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"}):(0,r.jsx)(l(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:s=>e.onChange(s),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:e.dateFormat,minDate:e.minDate,disabled:e.disabled,wrapperClassName:"is-invalid",className:"form-control",maxDate:e.maxDate,showMonthDropdown:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0,monthsShown:e.monthsShown,showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"})})},80723:(e,s,t)=>{t.r(s),t.d(s,{default:()=>D});var a=t(9950),l=t(64055),r=t(86781),i=t(68459),n=t(56035),d=t(97937),c=t(28429),o=t(48738),m=t.n(o),h=t(86133),x=t(60666),j=t(27081),u=t(26473),b=t(41757),p=t(94166),g=t(9449),v=t(82612),N=t(88249),w=t(63112),S=t(44414);const y=e=>{let{row:s,register:t,errors:a}=e;return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)(v.Z,{label:"Status",type:"select",name:"invoice_status",className:"form-control-sm fs-5",containerClass:"mb-3",labelClassName:" d-none",register:t,errors:a,children:Object.keys(p.n).map((e=>(0,S.jsx)("option",{value:e,children:p.n[e]},`status${e}`)))},"invoice_status")})},C=e=>{let{row:s}=e;return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("h5",{children:(0,S.jsx)("span",{className:m()("badge",{"bg-success":null!==s.quickbook_id,"bg-warning":null===s.quickbook_id}),children:s.quickbook_id?"Syced":"Not Synced"})})})},f=e=>{let{invoice:s,register:t,errors:r,setValue:i}=e;console.log(s.due_date,"Asdf");const[n,d]=(0,a.useState)(new Date(s.due_date.toString()));return(0,S.jsxs)(S.Fragment,{children:[(0,S.jsx)("div",{className:"track-order-list",children:(0,S.jsxs)("ul",{className:"list-unstyled",children:[(0,S.jsxs)("li",{className:"completed",children:[(0,S.jsx)("div",{children:(0,S.jsx)("h5",{className:"mt-0 mb-1",children:"Invoice Created"})}),(0,S.jsx)("div",{children:(0,S.jsx)("p",{className:"text-muted",children:s.created_at})})]}),(0,S.jsxs)("li",{className:"completed",children:[(0,S.jsx)("h5",{className:"mt-0 mb-1",children:"Due Date"}),(0,S.jsxs)("div",{className:"text-muted",children:[(0,S.jsx)(w.A,{hideAddon:!0,showTimeSelect:!1,minDate:new Date,value:n,onChange:e=>{d(e),i("due_date",e.toLocaleString("sv-SE"))}}),r&&r.due_date?(0,S.jsx)(l.A.Control.Feedback,{type:"invalid",children:r.due_date.message}):null]})]})]})}),(0,S.jsx)("div",{children:(0,S.jsxs)("ul",{className:"list-group",children:[(0,S.jsxs)("li",{className:"list-group-item",children:[(0,S.jsx)("div",{children:(0,S.jsx)("h5",{className:"mt-0 mb-1",children:"QuickBook Status"})}),(0,S.jsx)("div",{className:"text-muted",children:(0,S.jsx)(C,{row:s})})]}),(0,S.jsxs)("li",{className:"list-group-item",children:[(0,S.jsx)("div",{children:(0,S.jsx)("h5",{className:"mt-0 mb-1",children:"Order Status"})}),(0,S.jsx)("div",{children:(0,S.jsx)("div",{className:"text-muted",children:(0,S.jsx)(y,{row:s,register:t,errors:r})})})]})]})})]})},k=e=>{let{invoice:s,register:t,errors:a}=e;return(0,S.jsx)(S.Fragment,{children:(0,S.jsx)("div",{className:"table-responsive mb-2",children:(0,S.jsxs)("table",{className:"table table-bordered table-centered mb-0",children:[(0,S.jsx)("thead",{className:"table-light",children:(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{children:"Name"}),(0,S.jsx)("th",{children:"Quantity"}),(0,S.jsx)("th",{children:"Total"})]})}),(0,S.jsxs)("tbody",{children:[(s.items||[]).map(((e,s)=>(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{scope:"row",children:(0,S.jsx)(v.Z,{label:"Name",type:"text",register:t,name:"name",errors:a,className:"form-control-sm",containerClass:"mb-3 input-group",labelClassName:"d-none",size:2},"name")}),(0,S.jsx)("td",{children:e.qty}),(0,S.jsx)("td",{children:(0,S.jsx)(v.Z,{label:"Total",type:"text",register:t,name:"total",errors:a,className:"form-control-sm",containerClass:"mb-3 input-group",labelClassName:"d-none",size:2},"total")})]},s))),(0,S.jsxs)("tr",{children:[(0,S.jsx)("th",{scope:"row",colSpan:2,className:"text-end",children:"Total :"}),(0,S.jsx)("td",{children:(0,S.jsxs)("div",{className:"fw-bold",children:[" ",s.items[0].total]})})]})]})]})})})},D=()=>{const e=(0,c.g)(),s=(0,u.t)(x.Ik().shape({})),t=(0,j.wA)(),[l,o]=(0,a.useState)(null),[m,p]=(0,a.useState)(""),[w,y]=(0,a.useState)(""),[C,D]=(0,a.useState)(!1);(0,a.useEffect)((()=>{t((0,b.XS)(e.id)).unwrap().then((e=>{o(e),O("name",e.items[0].name),O("invoice_status",e.status),O("due_date",e.due_date),O("total",e.items[0].total),O("id",e.id)}))}),[]);const A=(0,g.mN)({defaultValues:{},resolver:s}),{handleSubmit:_,register:T,setError:F,control:I,setValue:O,formState:{errors:q}}=A,E=_((async e=>{D(!0),t((0,b.RH)(e)).unwrap().then((e=>{e&&!0===e.status?(p(e.message),y(""),window.scrollTo({top:0,behavior:"smooth"})):y(null===e||void 0===e?void 0:e.message),D(!1)})).catch((e=>{for(var s in e.errors)try{F(s,{message:e.errors[s].toString()})}catch(t){}D(!1)}))}));return(0,S.jsxs)(a.Fragment,{children:[(0,S.jsx)(h.A,{breadCrumbItems:[{label:"Rent History",path:"/invoice"},{label:"Rent Edit",path:"/invoice/id",active:!0}],title:"Rent Edit"}),l&&(0,S.jsxs)("form",{onSubmit:E,children:[m&&(0,S.jsx)("div",{className:"alert alert-success",children:m}),w&&(0,S.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",dangerouslySetInnerHTML:{__html:w}}),(0,S.jsxs)(r.A,{children:[(0,S.jsx)(i.A,{lg:4,children:(0,S.jsx)(n.A,{children:(0,S.jsxs)(n.A.Body,{children:[(0,S.jsx)("h4",{className:"header-title mb-3",children:"Track Order"}),(0,S.jsxs)(r.A,{children:[(0,S.jsx)(i.A,{lg:6,children:(0,S.jsxs)("div",{className:"mb-4",children:[(0,S.jsx)("h5",{className:"mt-0",children:"Order ID:"}),(0,S.jsx)("p",{children:l.id})]})}),(0,S.jsx)(i.A,{lg:6,children:(0,S.jsxs)("div",{className:"mb-4",children:[(0,S.jsx)("h5",{className:"mt-0",children:"Quickbook ID:"}),(0,S.jsx)("p",{children:l.quickbook_id})]})})]}),(0,S.jsx)(v.Z,{type:"hidden",register:T,name:"id"}),(0,S.jsx)(f,{invoice:l,register:T,errors:q,setValue:O})]})})}),(0,S.jsx)(i.A,{lg:8,children:(0,S.jsx)(n.A,{children:(0,S.jsxs)(n.A.Body,{children:[(0,S.jsxs)("h4",{className:"header-title mb-3",children:["Items from Order ",l.id]}),(0,S.jsx)(k,{invoice:l,register:T,errors:q}),C?(0,S.jsx)(N.m,{}):(0,S.jsx)(d.A,{variant:"primary",type:"submit",children:"Submit"})]})})}),(0,S.jsx)(i.A,{lg:12})]})]})]})}},94166:(e,s,t)=>{t.d(s,{n:()=>a});const a={0:"Unpaid",1:"Payment Failed",2:"Paid"}}}]);