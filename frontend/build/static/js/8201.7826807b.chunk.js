"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[8201],{63647:(e,a,s)=>{s.d(a,{m:()=>l});var r=s(95252),n=s(44414);const l=()=>(0,n.jsx)(r.A,{animation:"border",role:"status",children:(0,n.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},63112:(e,a,s)=>{s.d(a,{A:()=>t});var r=s(72348),n=s.n(r),l=(s(4434),s(44414));const t=e=>(0,l.jsx)(l.Fragment,{children:e.showTimeSelectOnly?(0,l.jsx)(n(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:"hh:mm",className:"form-control "+e.inputClass,minDate:e.minDate,scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,maxDate:e.maxDate,disabled:e.disabled,monthsShown:e.monthsShown,wrapperClassName:"is-invalid",showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"}):(0,l.jsx)(n(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:e.dateFormat,minDate:e.minDate,disabled:e.disabled,wrapperClassName:"is-invalid",className:"form-control "+e.inputClass,maxDate:e.maxDate,showMonthDropdown:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0,monthsShown:e.monthsShown,showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"})})},41033:(e,a,s)=>{s.d(a,{A:()=>i});s(9950);var r=s(86781),n=s(68459),l=s(81924),t=s(44414);const i=e=>(0,t.jsx)(r.A,{children:(0,t.jsx)(n.A,{children:(0,t.jsxs)("div",{className:"page-title-box",children:[(0,t.jsx)("div",{children:(0,t.jsxs)(l.A,{className:"m-0 mb-0",children:[(0,t.jsx)(l.A.Item,{href:"/",children:"Home"}),(e.breadCrumbItems||[]).map(((e,a)=>e.active?(0,t.jsx)(l.A.Item,{active:!0,children:e.label},a):(0,t.jsx)(l.A.Item,{href:e.path,children:e.label},a)))]})}),(0,t.jsx)("h4",{className:"page-title",children:e.title})]})})})},68984:(e,a,s)=>{s.d(a,{Z:()=>h,z:()=>t});var r=s(9950),n=s(9449),l=s(44414);const t=e=>{let{defaultValues:a,resolver:s,children:t,onSubmit:i,formClass:o}=e;const c=(0,n.mN)({defaultValues:a,resolver:s}),{handleSubmit:d,register:m,control:h,formState:{errors:u}}=c;return(0,l.jsx)("form",{onSubmit:d(i),className:o,noValidate:!0,children:Array.isArray(t)?t.map((e=>e.props&&e.props.name?r.createElement(e.type,{...{...e.props,register:m,key:e.props.name,errors:u,control:h}}):e)):t})};var i=s(75623),o=s(64055),c=s(48738),d=s.n(c);const m=e=>{let{name:a,placeholder:s,refCallback:n,errors:t,control:c,register:m,className:h}=e;const[u,p]=(0,r.useState)(!1);return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(i.A,{className:"mb-0",children:[(0,l.jsx)(o.A.Control,{type:u?"text":"password",placeholder:s,name:a,id:a,as:"input",ref:e=>{n&&n(e)},className:h,isInvalid:!(!t||!t[a]),...m?m(a):{},autoComplete:a}),(0,l.jsx)("div",{className:d()("input-group-text","input-group-password",{"show-password":u}),"data-password":u?"true":"false",children:(0,l.jsx)("span",{className:"password-eye",onClick:()=>{p(!u)}})})]})})},h=e=>{let{label:a,type:s,name:r,placeholder:n,register:t,errors:i,control:c,className:d,labelClassName:h,containerClass:u,refCallback:p,children:x,rows:j,symbol:g,...v}=e;const b="textarea"===s?"textarea":"select"===s?"select":"input";return(0,l.jsx)(l.Fragment,{children:"hidden"===s?(0,l.jsx)("input",{type:s,name:r,id:r,...t?t(r):{},...v,className:d}):(0,l.jsx)(l.Fragment,{children:"password"===s?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(o.A.Group,{className:u,children:[a?(0,l.jsxs)(l.Fragment,{children:[" ",(0,l.jsx)(o.A.Label,{className:h,children:a})," ",x," "]}):null,(0,l.jsx)(m,{name:r,placeholder:n,refCallback:p,errors:i,register:t,className:d}),i&&i[r]?(0,l.jsx)(o.A.Control.Feedback,{type:"invalid",className:"d-block",children:i[r].message}):null]})}):(0,l.jsx)(l.Fragment,{children:"checkbox"===s||"radio"===s?(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(o.A.Group,{className:u,children:[(0,l.jsx)(o.A.Check,{type:s,label:a,name:r,id:r,ref:e=>{p&&p(e)},className:d,isInvalid:!(!i||!i[r]),...t?t(r):{},...v}),i&&i[r]?(0,l.jsx)(o.A.Control.Feedback,{type:"invalid",children:i[r].message}):null]})}):(0,l.jsxs)(o.A.Group,{className:u,children:[a?(0,l.jsx)(o.A.Label,{className:h,children:a}):null,g?(0,l.jsxs)("div",{className:"input-group",children:[(0,l.jsx)("span",{className:"input-group-text",id:r,children:g}),(0,l.jsx)(o.A.Control,{type:s,placeholder:n,name:r,id:r,as:b,ref:e=>{p&&p(e)},className:d,isInvalid:!(!i||!i[r]),...t?t(r):{},rows:j,...v,autoComplete:r,children:x||null})]}):(0,l.jsx)(o.A.Control,{type:s,placeholder:n,name:r,id:r,as:b,ref:e=>{p&&p(e)},className:d,isInvalid:!(!i||!i[r]),...t?t(r):{},rows:j,...v,autoComplete:r,children:x||null}),i&&i[r]?(0,l.jsx)(o.A.Control.Feedback,{type:"invalid",children:i[r].message}):null]})})})})}},98201:(e,a,s)=>{s.r(a),s.d(a,{default:()=>C});var r=s(9950),n=s(9449),l=s(471),t=s(86781),i=s(68459),o=s(64055),c=s(584),d=s(90729),m=s(97937),h=s(41033),u=s(13059),p=s(27081),x=s(28429),j=s(42074),g=s(80183),v=s(68984),b=s(44051),A=s.n(b),N=s(26473),_=s(60666),f=s(63112),y=s(63647),w=s(44414);const k=()=>{var e;const a=(0,N.t)(_.Ik().shape({work_requested:_.Yj().required("Please select Work Requested"),tanent_name:_.Yj().required("Please enter tanent name")})),[s,h]=(0,r.useState)(""),[b,k]=(0,r.useState)(""),[C,S]=(0,r.useState)();let{user:F,customerUser:D}=(0,p.d4)((e=>({user:e.Auth.user,customerUser:e.CustomerAuth.user})));F||(F=D);const T=(0,n.mN)({defaultValues:{},resolver:a}),{handleSubmit:Z,register:I,setError:L,control:O,watch:R,setValue:P,reset:q,formState:{errors:M}}=T,G=(0,p.wA)();let E=(0,r.useRef)(null),U=(0,r.useRef)(null);const[Y,W]=(0,r.useState)(new Date),[z,B]=(0,r.useState)(new Date),[V,H]=(0,r.useState)(new Date),[X,$]=(0,r.useState)(!1);(0,r.useEffect)((()=>{G((0,u.Xs)(K.id)).unwrap().then((e=>{var a,s,r;null!==e&&(P("id",e.id),P("tanent_name",null===e||void 0===e?void 0:e.tanent_name),P("work_requested",null===e||void 0===e?void 0:e.work_requested),P("tanent_signature",null===e||void 0===e?void 0:e.tanent_signature),null===(a=E.current)||void 0===a||a.fromDataURL(null===e||void 0===e?void 0:e.tanent_signature),U.current&&U.current.fromDataURL(null===e||void 0===e?void 0:e.service_signature),P("service_signature",null===e||void 0===e?void 0:e.service_signature),P("phone",null===e||void 0===e?void 0:e.phone),P("ok_to_enter",null===e||void 0===e?void 0:e.ok_to_enter.toString()),P("action_taken",null!==(s=null===e||void 0===e?void 0:e.action_taken)&&void 0!==s?s:""),P("action_date",null===e||void 0===e?void 0:e.action_date),P("work_done",null===e||void 0===e?void 0:e.work_done),P("status",null===e||void 0===e?void 0:e.status.toString()),null!==e&&void 0!==e&&e.chargable&&P("chargable",null===e||void 0===e?void 0:e.chargable.toString()),null!==e&&void 0!==e&&e.action_date&&W(new Date(null===e||void 0===e?void 0:e.action_date)),null!==e&&void 0!==e&&e.time_in&&B(new Date("2024-12-12 "+(null===e||void 0===e?void 0:e.time_in))),null!==e&&void 0!==e&&e.time_out&&H(new Date("2024-12-12 "+(null===e||void 0===e?void 0:e.time_out))),G((0,g.Tv)(e.user_id)).unwrap().then((e=>{S(e)})),E.current&&(null===(r=E.current)||void 0===r||r.off()))})).catch((e=>k(e)))}),[]);const J=Z((async e=>{$(!0),G((0,u.$L)(e)).unwrap().then((e=>{e&&!0===e.status&&(h(e.message),k(""),window.scrollTo({top:0,behavior:"smooth"}),$(!1))})).catch((e=>{for(var a in e.errors)try{L(a,{message:e.errors[a].toString()})}catch(s){}$(!1)}))})),K=(0,x.g)();return(0,w.jsxs)(w.Fragment,{children:[s&&(0,w.jsxs)("div",{className:"alert alert-success",children:[s,(0,w.jsx)(j.N_,{to:"/maintanance-admin",children:" Back to Maintanance."})]}),b&&(0,w.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:b}),(0,w.jsxs)("form",{onSubmit:J,children:[(0,w.jsx)(l.A,{children:(0,w.jsxs)(l.A.Body,{children:[(0,w.jsxs)(t.A,{children:[(0,w.jsx)(i.A,{lg:4,children:(0,w.jsxs)(o.A.Group,{className:"mb-3",children:[(0,w.jsx)(o.A.Label,{className:"me-2",children:"Building"}),(0,w.jsx)(o.A.Label,{children:C&&C.user.apartment_name}),(0,w.jsx)(v.Z,{type:"hidden",name:"user_id",value:F.user_id,disabled:!0,register:I}),(0,w.jsx)(v.Z,{type:"hidden",name:"id",register:I,disabled:!0})]})}),(0,w.jsx)(i.A,{lg:3,children:(0,w.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Apt"}),(0,w.jsx)(o.A.Label,{children:C&&C.user.flat_name}),(0,w.jsx)(v.Z,{type:"hidden",disabled:!0,name:"flat_id",value:C&&(null===(e=C.user.flat)||void 0===e?void 0:e.flat_id),register:I})]})})]}),(0,w.jsxs)(t.A,{children:[(0,w.jsx)(i.A,{lg:4,children:(0,w.jsx)(v.Z,{label:"Tanent Name",type:"text",disabled:!0,register:I,name:"tanent_name",errors:M,className:"form-control-sm ",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"tanent_name")}),(0,w.jsx)(i.A,{lg:3,children:(0,w.jsx)(v.Z,{label:"Phone",type:"text",disabled:!0,register:I,name:"phone",errors:M,className:"form-control-sm",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"phone")}),(0,w.jsx)(i.A,{lg:5,children:(0,w.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Ok to Enter"}),(0,w.jsx)(v.Z,{type:"radio",disabled:!0,className:"form-check-inline",name:"ok_to_enter",label:"Yes",value:"1",register:I}),(0,w.jsx)(v.Z,{type:"radio",disabled:!0,className:"form-check-inline",name:"ok_to_enter",label:"No",value:"2",register:I})]})})]}),(0,w.jsx)(t.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsx)(v.Z,{type:"textarea",title:"Work Requested",name:"work_requested",disabled:!0,placeholder:"Work Requested",className:"mb-3",register:I,errors:M,style:{height:"100px"}})})}),(0,w.jsx)(t.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsxs)(c.A,{className:"mb-3",children:[(0,w.jsx)(d.A,{className:"me-1 ",children:"Signature"}),(0,w.jsx)(n.xI,{control:O,name:"tanent_signature",render:e=>{let{field:a}=e;return(0,w.jsx)(A(),{ref:E,onEnd:()=>a.onChange((()=>{if(E.current)return E.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,w.jsx)(v.Z,{name:"tanent_signature",register:I,errors:M,disabled:!0,className:"is-invalid",type:"hidden"}),M&&M.tanent_signature?(0,w.jsx)(o.A.Control.Feedback,{type:"invalid",children:M.tanent_signature.message}):null]})})})]})}),(0,w.jsx)(l.A,{children:(0,w.jsxs)(l.A.Body,{children:[(0,w.jsx)(t.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Action Taken"}),(0,w.jsx)(v.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:I,value:1,label:"Work Completed"}),(0,w.jsx)(v.Z,{type:"radio",className:"form-check-inline",name:"action_taken",value:2,register:I,label:"Repaired Temporarily"}),(0,w.jsx)(v.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:I,value:3,label:"Parts on Order"}),(0,w.jsx)(v.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:I,value:4,label:"Outside Contractor Called"})]})})}),(0,w.jsxs)(t.A,{children:[(0,w.jsx)(i.A,{lg:4,children:(0,w.jsxs)(c.A,{className:"input-group mb-3 ",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Date"}),(0,w.jsx)(v.Z,{type:"hidden",register:I,name:"action_date",value:Y.toISOString().split("T")[0]},"action_date"),(0,w.jsx)(f.A,{hideAddon:!0,value:Y,showTimeSelect:!1,inputClass:"form-control-sm ",dateFormat:"MM-dd-yyyy",onChange:e=>{W(e),P("action_date",e.toLocaleString("sv-SE"))}}),M&&M.action_date?(0,w.jsx)(o.A.Control.Feedback,{type:"invalid",children:M.action_date.message}):null]})}),(0,w.jsx)(i.A,{lg:4,children:(0,w.jsxs)(c.A,{className:"input-group mb-3 ",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time In"}),(0,w.jsx)(v.Z,{type:"hidden",register:I,name:"time_in",errors:M},"time_in"),(0,w.jsx)(f.A,{value:z,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{B(e),P("time_in",z.toLocaleTimeString("it-IT"))}}),M&&M.time_in?(0,w.jsx)(o.A.Control.Feedback,{type:"invalid",children:M.time_in.message}):null]})}),(0,w.jsx)(i.A,{lg:4,children:(0,w.jsxs)(c.A,{className:"input-group mb-3 ",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time Out"}),(0,w.jsx)(v.Z,{type:"hidden",register:I,name:"time_out",errors:M},"time_out"),(0,w.jsx)(f.A,{value:V,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{H(e),P("time_out",V.toLocaleTimeString("it-IT"))}}),M&&M.time_out?(0,w.jsx)(o.A.Control.Feedback,{type:"invalid",children:M.time_out.message}):null]})})]}),(0,w.jsx)(t.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsx)(v.Z,{type:"textarea",title:"Work Done",name:"work_done",placeholder:"Work Done",className:"mb-3",register:I,errors:M,style:{height:"125px"}})})}),(0,w.jsx)(t.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsxs)(c.A,{className:"mb-3",children:[(0,w.jsx)(d.A,{className:"me-1 ",children:"Service Person Signature"}),(0,w.jsx)(n.xI,{control:O,name:"service_signature",render:e=>{let{field:a}=e;return(0,w.jsx)(A(),{ref:U,onEnd:()=>a.onChange((()=>{if(U.current)return U.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,w.jsx)(v.Z,{name:"service_signature",register:I,errors:M,className:"is-invalid",type:"hidden"})]})})}),(0,w.jsx)(t.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,w.jsx)(v.Z,{type:"radio",name:"chargable",value:1,register:I,label:"Chargable to Occupant",className:"form-check-inline"}),(0,w.jsx)(v.Z,{type:"radio",name:"chargable",value:2,register:I,label:"Management",className:"form-check-inline"}),(0,w.jsx)(v.Z,{type:"hidden",name:"repaired_by",register:I,value:F.user_id})]})})}),(0,w.jsx)(t.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,w.jsx)(o.A.Label,{children:"Status:"}),(0,w.jsx)(v.Z,{type:"radio",id:"repair_status",name:"status",value:1,register:I,label:"Pending",className:"form-check-inline"}),(0,w.jsx)(v.Z,{type:"radio",name:"status",id:"repair_status",value:2,register:I,label:"In Progress",className:"form-check-inline"}),(0,w.jsx)(v.Z,{type:"radio",name:"status",id:"repair_status",value:3,register:I,label:"On Hold",className:"form-check-inline"}),(0,w.jsx)(v.Z,{type:"radio",name:"status",id:"repair_status",value:4,register:I,label:"Done",className:"form-check-inline"})]})})})]})}),(0,w.jsx)(t.A,{children:(0,w.jsx)(i.A,{lg:3,children:X?(0,w.jsx)(y.m,{}):(0,w.jsx)(m.A,{variant:"primary",type:"submit",children:"Submit"})})})]})]})},C=()=>(0,w.jsxs)(r.Fragment,{children:[(0,w.jsx)(h.A,{breadCrumbItems:[{label:"Dashboard",path:"/dashboard-1"},{label:"Maintanance",path:"/maintanance"},{label:"Maintanance Edit",path:"/maintanance",active:!0}],title:"Maintanance Request"}),(0,w.jsx)(t.A,{children:(0,w.jsx)(i.A,{children:(0,w.jsx)(k,{})})})]})},97937:(e,a,s)=>{s.d(a,{A:()=>d});var r=s(48738),n=s.n(r),l=s(9950),t=s(82111),i=s(44089),o=s(44414);const c=l.forwardRef(((e,a)=>{let{as:s,bsPrefix:r,variant:l="primary",size:c,active:d=!1,disabled:m=!1,className:h,...u}=e;const p=(0,i.oU)(r,"btn"),[x,{tagName:j}]=(0,t.Am)({tagName:s,disabled:m,...u}),g=j;return(0,o.jsx)(g,{...x,...u,ref:a,disabled:m,className:n()(h,p,d&&"active",l&&"".concat(p,"-").concat(l),c&&"".concat(p,"-").concat(c),u.href&&m&&"disabled")})}));c.displayName="Button";const d=c},95252:(e,a,s)=>{s.d(a,{A:()=>c});var r=s(48738),n=s.n(r),l=s(9950),t=s(44089),i=s(44414);const o=l.forwardRef(((e,a)=>{let{bsPrefix:s,variant:r,animation:l="border",size:o,as:c="div",className:d,...m}=e;s=(0,t.oU)(s,"spinner");const h="".concat(s,"-").concat(l);return(0,i.jsx)(c,{ref:a,...m,className:n()(d,h,o&&"".concat(h,"-").concat(o),r&&"text-".concat(r))})}));o.displayName="Spinner";const c=o}}]);