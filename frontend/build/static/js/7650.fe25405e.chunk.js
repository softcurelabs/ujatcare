"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[7650],{63112:(e,a,s)=>{s.d(a,{A:()=>l});var r=s(72348),t=s.n(r),n=(s(4434),s(44414));const l=e=>(0,n.jsx)(n.Fragment,{children:e.showTimeSelectOnly?(0,n.jsx)(t(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:"hh:mm",className:"form-control",minDate:e.minDate,scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,maxDate:e.maxDate,disabled:e.disabled,monthsShown:e.monthsShown,wrapperClassName:"is-invalid",showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"}):(0,n.jsx)(t(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:e.dateFormat,minDate:e.minDate,disabled:e.disabled,wrapperClassName:"is-invalid",className:"form-control",maxDate:e.maxDate,showMonthDropdown:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0,monthsShown:e.monthsShown,showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"})})},27650:(e,a,s)=>{s.r(a),s.d(a,{default:()=>S});var r=s(9950),t=s(9449),n=s(471),l=s(86781),i=s(68459),o=s(64055),m=s(584),c=s(90729),d=s(97937),h=s(86133),u=s(13059),x=s(27081),j=s(42074),p=s(80183),g=s(68984),b=s(44051),A=s.n(b),v=s(26473),N=s(60666),w=s(63112),f=s(88249),y=s(44414);const _=()=>{var e;const a=(0,v.t)(N.Ik().shape({work_requested:N.Yj().required("Please select Work Requested"),tanent_name:N.Yj().required("Please enter tanent name"),phone:N.Yj().required("Please enter phone name"),ok_to_enter:N.Yj().required("Please select ok to enter"),tanent_signature:N.Yj().required().matches(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/,"Signature must be png")})),[s,h]=(0,r.useState)(""),[b,_]=(0,r.useState)(""),[S,C]=(0,r.useState)();let{user:k,customerUser:T}=(0,x.d4)((e=>({user:e.Auth.user,customerUser:e.CustomerAuth.user})));k||(k=T);const D=(0,t.mN)({defaultValues:{},resolver:a}),{handleSubmit:Z,register:F,setError:L,control:O,setValue:I,reset:q,formState:{errors:Y}}=D,M=(0,x.wA)();let P=(0,r.useRef)(null),R=(0,r.useRef)(null);const[E,W]=(0,r.useState)(new Date),[G,U]=(0,r.useState)(new Date),[z,B]=(0,r.useState)(new Date),[V,H]=(0,r.useState)(!1);(0,r.useEffect)((()=>{M((0,p.Tv)(k.user_id)).unwrap().then((e=>{C(e)}))}),[k.user_id]);const J=Z((async e=>{H(!0),M((0,u.v5)(e)).unwrap().then((e=>{var a;e&&!0===e.status&&(h(e.message),_(""),q(),null===(a=P.current)||void 0===a||a.clear(),window.scrollTo({top:0,behavior:"smooth"}),H(!1))})).catch((e=>{for(var a in e.errors)try{L(a,{message:e.errors[a].toString()})}catch(s){}H(!1)}))}));return(0,y.jsx)(y.Fragment,{children:(0,y.jsx)(n.A,{children:(0,y.jsxs)(n.A.Body,{children:[s&&(0,y.jsxs)("div",{className:"alert alert-success",children:[s,(0,y.jsx)(j.N_,{to:"/maintanance",children:" Back to Maintanance."})]}),b&&(0,y.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:b}),S&&(0,y.jsxs)("form",{onSubmit:J,children:[(0,y.jsxs)(l.A,{children:[(0,y.jsx)(i.A,{lg:4,children:(0,y.jsxs)(o.A.Group,{className:"mb-3",children:[(0,y.jsx)(o.A.Label,{className:"me-2",children:"Building"}),(0,y.jsx)(o.A.Label,{children:S.user.apartment_name}),(0,y.jsx)(g.Z,{type:"hidden",name:"user_id",value:k.user_id,register:F})]})}),(0,y.jsx)(i.A,{lg:3,children:(0,y.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,y.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Apt"}),(0,y.jsx)(o.A.Label,{children:S.user.flat_name}),(0,y.jsx)(g.Z,{type:"hidden",name:"flat_id",value:null===(e=S.user.flat)||void 0===e?void 0:e.flat_id,register:F})]})})]}),(0,y.jsxs)(l.A,{children:[(0,y.jsx)(i.A,{lg:4,children:(0,y.jsx)(g.Z,{label:"Tanent Name",type:"text",register:F,name:"tanent_name",errors:Y,className:"form-control-sm ",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"tanent_name")}),(0,y.jsx)(i.A,{lg:3,children:(0,y.jsx)(g.Z,{label:"Phone",type:"text",register:F,name:"phone",errors:Y,className:"form-control-sm",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"phone")}),(0,y.jsx)(i.A,{lg:5,children:(0,y.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,y.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Ok to Enter"}),(0,y.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"ok_to_enter",label:"Yes",checked:!0,value:1,register:F}),(0,y.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"ok_to_enter",label:"No",value:2,register:F})]})})]}),(0,y.jsx)(l.A,{children:(0,y.jsx)(i.A,{lg:12,children:(0,y.jsx)(g.Z,{type:"textarea",title:"Work Requested",name:"work_requested",placeholder:"Work Requested",className:"mb-3",register:F,errors:Y,style:{height:"125px"}})})}),(0,y.jsx)(l.A,{children:(0,y.jsx)(i.A,{lg:12,children:(0,y.jsxs)(m.A,{className:"mb-3",children:[(0,y.jsx)(c.A,{className:"me-1 ",children:"Signature"}),(0,y.jsx)(t.xI,{control:O,name:"tanent_signature",render:e=>{let{field:a}=e;return(0,y.jsx)(A(),{ref:P,onEnd:()=>a.onChange((()=>{if(P.current)return P.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,y.jsx)(g.Z,{name:"tanent_signature",register:F,errors:Y,className:"is-invalid",type:"hidden"}),Y&&Y.tanent_signature?(0,y.jsx)(o.A.Control.Feedback,{type:"invalid",children:Y.tanent_signature.message}):null]})})}),(0,y.jsx)(l.A,{children:(0,y.jsx)(i.A,{lg:12,children:(0,y.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,y.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Action Taken"}),(0,y.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:F,value:1,disabled:!0,label:"Work Completed"}),(0,y.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"action_taken",value:2,disabled:!0,register:F,label:"Repaired Temporarily"}),(0,y.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:F,value:3,disabled:!0,label:"Parts on Order"}),(0,y.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:F,value:4,disabled:!0,label:"Outside Contractor Called"})]})})}),(0,y.jsxs)(l.A,{children:[(0,y.jsx)(i.A,{lg:4,children:(0,y.jsxs)(m.A,{className:"input-group mb-3 ",children:[(0,y.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Date"}),(0,y.jsx)(g.Z,{type:"hidden",register:F,name:"action_date",value:E.toISOString().split("T")[0]},"action_date"),(0,y.jsx)(w.A,{hideAddon:!0,disabled:!0,value:E,showTimeSelect:!1,inputClass:"form-control-sm",dateFormat:"MM-dd-yyyy",onChange:e=>{W(e),I("action_date",e.toLocaleString("sv-SE"))}})]})}),(0,y.jsx)(i.A,{lg:4,children:(0,y.jsxs)(m.A,{className:"input-group mb-3 ",children:[(0,y.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time In"}),(0,y.jsx)(g.Z,{type:"hidden",register:F,name:"time_in"},"time_in"),(0,y.jsx)(w.A,{value:G,disabled:!0,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{U(e),I("time_in",G.toLocaleTimeString("it-IT"))}})]})}),(0,y.jsx)(i.A,{lg:4,children:(0,y.jsxs)(m.A,{className:"input-group mb-3 ",children:[(0,y.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time Out"}),(0,y.jsx)(g.Z,{type:"hidden",register:F,name:"time_out"},"time_out"),(0,y.jsx)(w.A,{value:z,disabled:!0,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{U(e),I("time_out",z.toLocaleTimeString("it-IT"))}})]})})]}),(0,y.jsx)(l.A,{children:(0,y.jsx)(i.A,{lg:12,children:(0,y.jsx)(g.Z,{type:"textarea",title:"Work Done",name:"work_done",disabled:!0,placeholder:"Work Done",className:"mb-3",register:F,errors:Y,style:{height:"125px"}})})}),(0,y.jsx)(l.A,{children:(0,y.jsx)(i.A,{lg:12,children:(0,y.jsxs)(m.A,{className:"mb-3",children:[(0,y.jsx)(c.A,{className:"me-1 ",children:"Service Person Signature"}),(0,y.jsx)(t.xI,{control:O,name:"service_signature",render:e=>{let{field:a}=e;return(0,y.jsx)(A(),{ref:R,onEnd:()=>a.onChange((()=>{if(R.current)return R.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,y.jsx)(g.Z,{name:"service_signature",register:F,errors:Y,className:"is-invalid",type:"hidden"})]})})}),(0,y.jsx)(l.A,{children:(0,y.jsx)(i.A,{lg:12,children:(0,y.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,y.jsx)(g.Z,{type:"radio",name:"chargable",value:1,register:F,disabled:!0,label:"Chargable to Occupant",className:"form-check-inline"}),(0,y.jsx)(g.Z,{type:"radio",name:"chargable",value:2,disabled:!0,register:F,label:"Management",className:"form-check-inline"})]})})}),(0,y.jsx)(l.A,{children:(0,y.jsx)(i.A,{lg:3,children:V?(0,y.jsx)(f.m,{}):(0,y.jsx)(d.A,{variant:"primary",type:"submit",children:"Submit"})})})]})]})})})},S=()=>(0,y.jsxs)(r.Fragment,{children:[(0,y.jsx)(h.A,{breadCrumbItems:[{label:"Dashboard",path:"/dashboard-1"},{label:"Maintanance Create",path:"/maintanance/create",active:!0}],title:"Maintanance Request"}),(0,y.jsx)(l.A,{children:(0,y.jsx)(i.A,{children:(0,y.jsx)(_,{})})})]})}}]);