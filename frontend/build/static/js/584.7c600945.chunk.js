"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[584],{10726:(e,s,a)=>{a.d(s,{T:()=>n});var l=a(47939),t=a(93298),i=a(46417);const n=e=>{let{okLabel:s="OK",cancelLabel:a="Cancel",title:n="Confirmation",submitForm:r,show:c,targetId:d,handleClose:o}=e;return(0,i.jsxs)(l.Z,{show:c,onHide:o,children:[(0,i.jsx)(l.Z.Header,{closeButton:!0,children:(0,i.jsx)(l.Z.Title,{children:n})}),(0,i.jsx)(l.Z.Body,{children:"Do you really want to submit?"}),(0,i.jsxs)(l.Z.Footer,{children:[(0,i.jsx)(t.Z,{variant:"secondary",onClick:o,children:a}),(0,i.jsx)(t.Z,{variant:"primary",onClick:()=>r(d),children:s})]})]})}},95251:(e,s,a)=>{a.d(s,{Z:()=>m});var l=a(47313),t=a(2135),i=a(65832),n=a(63849),r=a(31616),c=a(80614),d=a(46417);const o=e=>{const[s,a]=(0,l.useState)([]),o=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const a=s<0?0:s,l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.ZP,{...e,onDrop:s=>(s=>{var l=s;e.showPreview&&((s||[]).map((e=>Object.assign(e,{preview:"image"===e.type.split("/")[0]?URL.createObjectURL(e):null,formattedSize:o(e.size)}))),(l=[]).push(...s),a(l)),e.onFileUpload&&e.onFileUpload(l)})(s),children:e=>{let{getRootProps:s,getInputProps:a}=e;return(0,d.jsx)("div",{className:"dropzone",children:(0,d.jsxs)("div",{className:"dz-message needsclick",...s(),children:[(0,d.jsx)("input",{...a()}),(0,d.jsx)("i",{className:"h3 text-muted dripicons-cloud-upload"}),(0,d.jsx)("h4",{children:"Drop Image here or click to upload."}),(0,d.jsx)("span",{className:"text-muted font-13"})]})})}}),e.showPreview&&(0,d.jsx)("div",{className:"dropzone-previews mt-3",id:"uploadPreviewTemplate",children:(s||[]).map(((l,c)=>(0,d.jsx)(i.Z,{className:"mt-1 mb-0 shadow-none border",children:(0,d.jsx)("div",{className:"p-2",children:(0,d.jsxs)(n.Z,{className:"align-items-center",children:[l.preview&&(0,d.jsx)(r.Z,{className:"col-auto",children:(0,d.jsx)("img",{"data-dz-thumbnail":"",className:"avatar-sm rounded bg-light",alt:l.name,src:l.preview})}),!l.preview&&(0,d.jsx)(r.Z,{className:"col-auto",children:(0,d.jsx)("div",{className:"avatar-sm",children:(0,d.jsx)("span",{className:"avatar-title bg-primary rounded",children:l.type.split("/")[0]})})}),(0,d.jsxs)(r.Z,{className:"ps-0",children:[(0,d.jsx)(t.rU,{to:"#",className:"text-muted fw-bold",children:l.name}),(0,d.jsx)("p",{className:"mb-0",children:(0,d.jsx)("strong",{children:l.formattedSize})})]}),(0,d.jsx)(r.Z,{className:"text-end",children:(0,d.jsx)(t.rU,{to:"#",className:"btn btn-link btn-lg text-muted shadow-none",children:(0,d.jsx)("i",{className:"dripicons-cross",onClick:()=>(l=>{const t=[...s];t.splice(l,1),a(t),e.onFileUpload&&e.onFileUpload(t)})(c)})})})]})})},c+"-file")))})]})};o.defaultProps={showPreview:!0};const m=o},61875:(e,s,a)=>{a.d(s,{Z:()=>t});a(47313);var l=a(46417);const t=()=>(0,l.jsx)("div",{className:"preloader position-absolute",id:"preloader",children:(0,l.jsx)("div",{className:"status",id:"status",children:(0,l.jsx)("div",{className:"spinner"})})})},20433:(e,s,a)=>{a.d(s,{Z:()=>c});var l=a(47313),t=a(2135),i=a(72884),n=a.n(i),r=a(46417);const c=e=>{let{tableProps:s,sizePerPageList:a}=e;const[i,c]=(0,l.useState)(s.pageCount),[d,o]=(0,l.useState)(s.state.pageIndex);(0,l.useEffect)((()=>{c(s.pageCount),o(s.state.pageIndex)}),[s.pageCount,s.state.pageIndex]);const m=(0,l.useCallback)(((e,s)=>e.filter((e=>e<=i))),[i]),h=(0,l.useCallback)(((e,s)=>s<7?m([1,2,3,4,5,6],s):e%5>=0&&e>4&&e+2<s?[1,e-1,e,e+1,s]:e%5>=0&&e>4&&e+2>=s?[1,s-3,s-2,s-1,s]:[1,2,3,4,5,s]),[m]),x=e=>{if(e===d)return;const a=h(e,i);j(m(a,i)),s.gotoPage(e)};(0,l.useEffect)((()=>{const e=h(null,i);j(e)}),[i,h]);const[u,j]=(0,l.useState)(h(null,i)),p=d;return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"d-lg-flex align-items-center text-center pb-1",children:[a.length>0&&(0,r.jsxs)("div",{className:"d-inline-block me-3",children:[(0,r.jsx)("label",{className:"me-1",children:"Display :"}),(0,r.jsx)("select",{value:s.state.pageSize,onChange:e=>{s.setPageSize(Number(e.target.value))},className:"form-select d-inline-block w-auto",children:(a||[]).map(((e,s)=>(0,r.jsx)("option",{value:e.value,children:e.text},s)))})]}),(0,r.jsxs)("span",{className:"me-3",children:["Page"," ",(0,r.jsxs)("strong",{children:[d," of ",s.pageOptions.length]})," "]}),(0,r.jsxs)("ul",{className:"pagination pagination-rounded d-inline-flex ms-auto align-item-center mb-0",children:[(0,r.jsx)("li",{className:n()("page-item","paginate_button","previous",{disabled:1===p}),onClick:()=>{1!==p&&x(p-1)},children:(0,r.jsx)(t.rU,{to:"#",className:"page-link",children:(0,r.jsx)("i",{className:"mdi mdi-chevron-left"})})},"prevpage"),(u||[]).map(((e,s,a)=>a[s-1]+1<e?(0,r.jsxs)(l.Fragment,{children:[(0,r.jsx)("li",{className:"page-item disabled d-none d-xl-inline-block",children:(0,r.jsx)(t.rU,{to:"#",className:"page-link",children:"..."})}),(0,r.jsx)("li",{className:n()("page-item","d-none","d-xl-inline-block",{active:p===e}),onClick:s=>x(e),children:(0,r.jsx)(t.rU,{to:"#",className:"page-link",children:e})})]},e):(0,r.jsx)("li",{className:n()("page-item","d-none","d-xl-inline-block",{active:p===e}),onClick:s=>x(e),children:(0,r.jsx)(t.rU,{to:"#",className:"page-link",children:e})},e))),(0,r.jsx)("li",{className:n()("page-item","paginate_button","next",{disabled:p===s.pageCount}),onClick:()=>{p!==s.pageCount&&x(p+1)},children:(0,r.jsx)(t.rU,{to:"#",className:"page-link",children:(0,r.jsx)("i",{className:"mdi mdi-chevron-right"})})},"nextpage")]})]})})}},90584:(e,s,a)=>{a.r(s),a.d(s,{default:()=>P});var l=a(47313),t=a(65832),i=a(465),n=a(42610),r=a(63849),c=a(31616),d=a(93298),o=a(51450),m=a(58467),h=a(1084),x=a(20433),u=a(10726),j=a(33689),p=a(47939),g=a(41709),v=a(3463),N=a(62563),b=a(75627),f=a(95251),Z=a(61875),w=a(2135),k=a(46417);const C=e=>{let{show:s,onHide:a,onSubmit:t}=e;const i=(0,N.X)(v.Ry().shape({})),n=(0,h.I0)(),[r,c]=(0,l.useState)(""),[o,m]=(0,l.useState)(!1),[x,u]=(0,l.useState)(""),{register:C,handleSubmit:S,setValue:P,setError:F,control:I,formState:{errors:y}}=(0,b.cI)({defaultValues:{},resolver:i}),U=S((e=>{m(!0),c(""),u(""),n((0,j.pj)(e)).unwrap().then((e=>{e&&!0===e.status&&(c(e.message),u(e.errors)),m(!1)})).catch((e=>{u(e.message),c(""),m(!1)}))}));return(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(p.Z,{show:s,onHide:a,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,dialogClassName:"modal-xl",children:[(0,k.jsx)(p.Z.Header,{className:"bg-light",onHide:a,closeButton:!0,children:(0,k.jsx)(p.Z.Title,{className:"m-0",children:"Import Renters"})}),(0,k.jsxs)(p.Z.Body,{className:"p-4",children:[(0,k.jsxs)(g.Z,{children:["Sample user import:"," ",(0,k.jsx)(w.rU,{to:"/users.xlsx",target:"_blank",children:"Download"})]}),r&&(0,k.jsx)("div",{className:"alert alert-success",children:r}),x&&(0,k.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",dangerouslySetInnerHTML:{__html:x}}),(0,k.jsxs)("form",{onSubmit:U,children:[(0,k.jsx)(b.Qr,{render:()=>(0,k.jsx)(f.Z,{maxFiles:1,onFileUpload:e=>{P("users",e[0])}}),name:"users",control:I}),(0,k.jsxs)("div",{className:"text-end mt-2",children:[o?(0,k.jsx)(Z.Z,{}):(0,k.jsx)(d.Z,{variant:"success",type:"submit",className:"waves-effect waves-light me-1",children:"Save"}),(0,k.jsx)(d.Z,{variant:"danger",className:"waves-effect waves-light",onClick:a,children:"Exit"})]})]})]})]})})},S=e=>{let{users:s}=e;const[a,r]=(0,l.useState)(!1),[c,d]=(0,l.useState)(0),o=(0,h.I0)(),[m,x]=(0,l.useState)(""),[p,g]=(0,l.useState)("");return(0,l.useEffect)((()=>{o((0,j.k9)(1))}),[a]),(0,k.jsx)(t.Z,{children:(0,k.jsxs)(t.Z.Body,{children:[m&&(0,k.jsx)("div",{className:"alert alert-success",children:m}),p&&(0,k.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:p}),(0,k.jsxs)("div",{className:"table-responsive",children:[(0,k.jsxs)(i.Z,{className:"mb-0 table-striped dt-responsive nowrap w-100",children:[(0,k.jsx)("thead",{className:"table-light",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{children:"Name"}),(0,k.jsx)("th",{children:"Email"}),(0,k.jsx)("th",{children:"Role"}),(0,k.jsx)("th",{children:"Actions"})]})}),(0,k.jsx)("tbody",{children:s&&s.data.length>0?s.data.map(((e,s)=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{children:e.user.name}),(0,k.jsx)("td",{children:e.user.email}),(0,k.jsx)("td",{children:e.user.role}),(0,k.jsx)("td",{children:(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)(n.Z,{className:"btn-group",align:"end",children:[(0,k.jsx)(n.Z.Toggle,{variant:"light",className:"table-action-btn btn-sm",children:(0,k.jsx)("i",{className:"mdi mdi-dots-horizontal"})}),(0,k.jsxs)(n.Z.Menu,{children:[(0,k.jsxs)(n.Z.Item,{href:"assign-permission/".concat(e.user.id),children:[(0,k.jsx)("i",{className:"mdi mdi-pencil me-2 text-muted font-18 vertical-middle"}),"Manage Permission"]}),(0,k.jsxs)(n.Z.Item,{href:"user/".concat(e.user.id),children:[(0,k.jsx)("i",{className:"mdi mdi-check-all me-2 text-muted font-18 vertical-middle"}),"Edit Profile"]}),(0,k.jsxs)(n.Z.Item,{onClick:()=>{d(e.user.id),r(!0)},children:[(0,k.jsx)("i",{className:"mdi mdi-delete me-2 text-muted font-18 vertical-middle"}),"Delete Profile"]})]})]})})})]},s))):(0,k.jsx)("p",{children:"No Data Found"})})]}),(0,k.jsx)(u.T,{show:a,targetId:c,submitForm:e=>{o((0,j.e2)(e)).unwrap().then((e=>{e&&!0===e.status&&(x(e.message),r(!1))})).catch((e=>{g(e.message),r(!1)}))},handleClose:()=>r(!1)})]})]})})},P=()=>{const e=(0,h.I0)(),[s,a]=(0,l.useState)(1),[t,i]=(0,l.useState)(!1),{users:n}=(0,h.v9)((e=>({users:e.User.users})));let u=(0,m.s0)();return(0,l.useEffect)((()=>{e((0,j.k9)(s))}),[s,t]),(0,k.jsxs)(l.Fragment,{children:[(0,k.jsx)(o.Z,{breadCrumbItems:[{label:"Users",path:"/user",active:!0}],title:"Staff"}),(0,k.jsx)(r.Z,{children:(0,k.jsxs)(c.Z,{lg:12,children:[(0,k.jsxs)(d.Z,{className:"waves-effect waves-light mb-3 me-3",onClick:()=>{u("/user/new")},children:[(0,k.jsx)("i",{className:"mdi mdi-plus-circle me-1"})," Add New"]}),(0,k.jsxs)(d.Z,{className:"waves-effect waves-light mb-3",onClick:()=>{i(!0)},children:[(0,k.jsx)("i",{className:"mdi mdi-plus-circle me-1"})," Import User"]}),n&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(S,{users:n}),(0,k.jsx)(x.Z,{tableProps:{pageCount:n.last_page,state:{pageIndex:n.current_page},pageOptions:{length:n.total},gotoPage:e=>{a(e)}},sizePerPageList:[{text:"10",value:10}]})]}),(0,k.jsx)(C,{show:t,onHide:()=>{i(!1)},onSubmit:()=>{i(!1)}})]})})]})}}}]);