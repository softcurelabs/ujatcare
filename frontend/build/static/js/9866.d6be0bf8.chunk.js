"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[9866],{59866:(e,a,s)=>{s.r(a),s.d(a,{default:()=>g});var r=s(9950),t=s(9449),l=s(471),i=s(86781),n=s(68459),c=s(97937),d=s(86133),o=s(68984),m=s(28429),u=s(80183),h=s(27081),p=s(26473),j=s(60666),x=s(19443),f=s(44414);const b=()=>{const e=(0,h.wA)(),[a,s]=(0,r.useState)(""),[d,b]=(0,r.useState)(""),g=(0,p.t)(j.Ik().shape({})),{flats:v}=(0,h.d4)((e=>({flats:e.Flat.flats}))),[A]=(0,r.useState)(!0),S=(0,m.Zp)(),y=(0,m.g)(),{register:_,handleSubmit:k,setValue:C,setError:w,formState:{errors:N}}=(0,t.mN)({defaultValues:{},resolver:g}),E=k((a=>{e((0,u.fS)(a)).unwrap().then((e=>{e&&!0===e.status&&s(e.message)})).catch((e=>{for(var a in e.errors)try{w(a,{message:e.errors[a].toString()})}catch(s){}}))}));return(0,r.useEffect)((()=>{e((0,x.qx)()).unwrap().then((()=>{e((0,u.Tv)(y.id)).unwrap().then((e=>{C("id",e.user.id),C("email",e.user.email),e.user.flat&&C("flat_id",e.user.flat.flat_id),C("role_id",e.user.role)})).catch((e=>b(e)))}))}),[y.id]),(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(l.A,{children:(0,f.jsxs)(l.A.Body,{children:[a&&(0,f.jsx)("div",{className:"alert alert-success",children:a}),d&&(0,f.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:d}),(0,f.jsx)(i.A,{children:(0,f.jsx)(n.A,{lg:6,children:(0,f.jsxs)("form",{onSubmit:E,className:A?"form-readonly":"",children:[(0,f.jsxs)("fieldset",{children:[(0,f.jsx)(o.Z,{label:"Email",type:"email",register:_,name:"email",placeholder:"Email",containerClass:"mb-3",disabled:!0}),(0,f.jsxs)(o.Z,{type:"select",label:"Role",name:"role_id",containerClass:"mb-3",register:_,errors:N,children:[(0,f.jsx)("option",{value:"",children:"Select Role"}),(0,f.jsx)("option",{value:"recident",children:"Tenant"})]}),(0,f.jsx)(o.Z,{type:"select",label:"Suite",name:"flat_id",containerClass:"mb-3 ",register:_,errors:N,children:v.length&&v.map((e=>(0,f.jsx)("optgroup",{label:e.name.toString(),children:e.flats.map((e=>e.has_occupied?(0,f.jsxs)("option",{value:e.id,disabled:!0,children:[e.name,e.has_occupied]},"flat"+e.id):(0,f.jsxs)("option",{value:e.id,children:[e.name,e.has_occupied]},"flat"+e.id)))},"apartment".concat(e.id))))})]}),(0,f.jsx)(c.A,{onClick:()=>S(-1),variant:"primary",className:"me-2",type:"submit",children:"Back"}),(0,f.jsx)(c.A,{variant:"primary",type:"submit",children:"Submit"})]})})})]})})})},g=()=>(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(d.A,{breadCrumbItems:[{label:"Tenant",path:"/tenant"},{label:"Assign Permission",path:"/user",active:!0}],title:"Assign Permission"}),(0,f.jsx)(i.A,{children:(0,f.jsx)(n.A,{children:(0,f.jsx)(b,{})})})]})}}]);