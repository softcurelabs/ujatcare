"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[8201],{63112:(e,s,a)=>{a.d(s,{A:()=>l});var r=a(72348),t=a.n(r),n=(a(4434),a(44414));const l=e=>(0,n.jsx)(n.Fragment,{children:e.showTimeSelectOnly?(0,n.jsx)(t(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:s=>e.onChange(s),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:"hh:mm",className:"form-control",minDate:e.minDate,scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,maxDate:e.maxDate,disabled:e.disabled,monthsShown:e.monthsShown,wrapperClassName:"is-invalid",showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"}):(0,n.jsx)(t(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:s=>e.onChange(s),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:e.dateFormat,minDate:e.minDate,disabled:e.disabled,wrapperClassName:"is-invalid",className:"form-control",maxDate:e.maxDate,showMonthDropdown:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0,monthsShown:e.monthsShown,showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"})})},98201:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var r=a(9950),t=a(9449),n=a(56035),l=a(86781),i=a(68459),o=a(64055),m=a(584),d=a(97937),c=a(86133),h=a(13059),u=a(27081),x=a(28429),j=a(42074),p=a(80183),g=a(82612),b=a(26473),A=a(60666),v=a(63112),_=a(88249),y=a(96944),S=a(44414);const N=()=>{var e;const s=(0,b.t)(A.Ik().shape({work_requested:A.Yj().required("Please select Work Requested"),tanent_name:A.Yj().required("Please enter tanent name")})),[a,c]=(0,r.useState)(""),[N,w]=(0,r.useState)(""),[f,k]=(0,r.useState)(),[C,T]=(0,r.useState)();let{user:Z,customerUser:L}=(0,u.d4)((e=>({user:e.Auth.user,customerUser:e.CustomerAuth.user})));Z||(Z=L);const{admins:F}=(0,u.d4)((e=>({admins:e.User.users})));(0,r.useEffect)((()=>{B((0,p.mX)({page:1,limit:1e3}))}),[]);const D=(0,t.mN)({defaultValues:{},resolver:s}),{handleSubmit:O,register:I,setError:M,control:q,watch:E,setValue:Y,reset:G,formState:{errors:P}}=D,B=(0,u.wA)(),[R,U]=(0,r.useState)(new Date),[V,H]=(0,r.useState)(new Date),[W,X]=(0,r.useState)(new Date),[$,z]=(0,r.useState)(!1);(0,r.useEffect)((()=>{B((0,h.Xs)(K.id)).unwrap().then((e=>{null!==e&&(k(e),Y("id",e.id),Y("tanent_name",null===e||void 0===e?void 0:e.tanent_name),Y("work_requested",null===e||void 0===e?void 0:e.work_requested),Y("tanent_signature",null===e||void 0===e?void 0:e.tanent_signature),Y("service_signature",null===e||void 0===e?void 0:e.service_signature),Y("phone",null===e||void 0===e?void 0:e.phone),Y("repaired_by",null===e||void 0===e?void 0:e.repaired_by),Y("ok_to_enter",null===e||void 0===e?void 0:e.ok_to_enter.toString()),B((0,p.Tv)(e.user_id)).unwrap().then((e=>{T(e)})))})).catch((e=>w(e)))}),[]);const J=O((async e=>{z(!0),B((0,h.$L)(e)).unwrap().then((e=>{e&&!0===e.status&&(G(),c(e.message),w(""),window.scrollTo({top:0,behavior:"smooth"}),z(!1))})).catch((e=>{for(var s in e.errors)try{M(s,{message:e.errors[s].toString()})}catch(a){}z(!1)}))})),K=(0,x.g)();return(0,S.jsxs)(S.Fragment,{children:[a&&(0,S.jsxs)("div",{className:"alert alert-success",children:[a,(0,S.jsx)(j.N_,{to:"/maintanance-admin",children:" Back to Maintanance."})]}),N&&(0,S.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:N}),(0,S.jsxs)("form",{onSubmit:J,children:[(0,S.jsx)(n.A,{children:(0,S.jsxs)(n.A.Body,{children:[(0,S.jsxs)(l.A,{children:[(0,S.jsx)(i.A,{lg:4,children:(0,S.jsxs)(o.A.Group,{className:"mb-3",children:[(0,S.jsx)(o.A.Label,{className:"me-2",children:"Building"}),(0,S.jsx)(o.A.Label,{children:C&&C.user.apartment_name}),(0,S.jsx)(g.Z,{type:"hidden",name:"user_id",value:Z.user_id,disabled:!0,register:I}),(0,S.jsx)(g.Z,{type:"hidden",name:"id",register:I,disabled:!0})]})}),(0,S.jsx)(i.A,{lg:3,children:(0,S.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,S.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Suite"}),(0,S.jsx)(o.A.Label,{children:C&&C.user.flat_name}),(0,S.jsx)(g.Z,{type:"hidden",disabled:!0,name:"flat_id",value:C&&(null===(e=C.user.flat)||void 0===e?void 0:e.flat_id),register:I})]})})]}),(0,S.jsxs)(l.A,{children:[(0,S.jsxs)(i.A,{lg:4,children:[(0,S.jsx)(o.A.Label,{className:"me-2",children:"Tanent Name"}),(0,S.jsx)(o.A.Label,{children:f&&f.tanent_name}),(0,S.jsx)(g.Z,{type:"hidden",disabled:!0,register:I,name:"tanent_name",errors:P},"tanent_name")]}),(0,S.jsxs)(i.A,{lg:3,children:[(0,S.jsx)(o.A.Label,{className:"me-2",children:"Tanent Phone"}),(0,S.jsx)(o.A.Label,{children:f&&f.phone}),(0,S.jsx)(g.Z,{type:"hidden",disabled:!0,name:"phone",register:I,errors:P},"phone")]}),(0,S.jsx)(i.A,{lg:5,children:(0,S.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,S.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Ok to Enter"}),(0,S.jsx)(o.A.Label,{children:f&&"1"==f.ok_to_enter?"Yes":"No"}),(0,S.jsx)(g.Z,{type:"hidden",disabled:!0,className:"form-check-inline",name:"ok_to_enter",register:I})]})})]}),(0,S.jsx)(l.A,{children:(0,S.jsxs)(i.A,{lg:12,children:[(0,S.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Request"}),(0,S.jsx)(o.A.Label,{children:f&&f.work_requested}),(0,S.jsx)(g.Z,{type:"hidden",name:"work_requested",disabled:!0,register:I,errors:P})]})})]})}),(0,S.jsx)(n.A,{children:(0,S.jsxs)(n.A.Body,{children:[(0,S.jsx)(l.A,{children:(0,S.jsx)(i.A,{lg:12,children:(0,S.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,S.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Action Taken"}),(0,S.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:I,value:1,errors:P,label:"Work Completed"}),(0,S.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"action_taken",value:2,register:I,errors:P,label:"Repaired Temporarily"}),(0,S.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:I,value:3,errors:P,label:"Parts on Order"}),(0,S.jsx)(g.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:I,value:4,errors:P,label:"Outside Contractor Called"})]})})}),(0,S.jsxs)(l.A,{children:[(0,S.jsx)(i.A,{lg:4,children:(0,S.jsxs)(m.A,{className:"input-group mb-3 ",children:[(0,S.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Date"}),(0,S.jsx)(g.Z,{type:"hidden",register:I,name:"action_date",value:R.toISOString().split("T")[0]},"action_date"),(0,S.jsx)(v.A,{hideAddon:!0,value:R,showTimeSelect:!1,inputClass:"form-control-sm ",dateFormat:"MM-dd-yyyy",onChange:e=>{U(e),Y("action_date",e.toLocaleString("sv-SE"))}}),P&&P.action_date?(0,S.jsx)(o.A.Control.Feedback,{type:"invalid",children:P.action_date.message}):null]})}),(0,S.jsx)(i.A,{lg:4,children:(0,S.jsxs)(m.A,{className:"input-group mb-3 ",children:[(0,S.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time In"}),(0,S.jsx)(g.Z,{type:"hidden",register:I,name:"time_in",errors:P},"time_in"),(0,S.jsx)(v.A,{value:V,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{H(e),Y("time_in",V.toLocaleTimeString("it-IT"))}}),P&&P.time_in?(0,S.jsx)(o.A.Control.Feedback,{type:"invalid",children:P.time_in.message}):null]})}),(0,S.jsx)(i.A,{lg:4,children:(0,S.jsxs)(m.A,{className:"input-group mb-3 ",children:[(0,S.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time Out"}),(0,S.jsx)(g.Z,{type:"hidden",register:I,name:"time_out",errors:P},"time_out"),(0,S.jsx)(v.A,{value:W,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{X(e),Y("time_out",W.toLocaleTimeString("it-IT"))}}),P&&P.time_out?(0,S.jsx)(o.A.Control.Feedback,{type:"invalid",children:P.time_out.message}):null]})})]}),(0,S.jsx)(l.A,{children:(0,S.jsx)(i.A,{lg:12,children:(0,S.jsx)(g.Z,{type:"textarea",title:"Work Done",name:"work_done",className:"mb-3",register:I,errors:P,style:{height:"75px"}})})}),(0,S.jsxs)(l.A,{children:[(0,S.jsx)(i.A,{lg:4,children:(0,S.jsxs)(o.A.Group,{className:"mb-2 input-group",children:[(0,S.jsx)(g.Z,{type:"radio",name:"chargable",value:1,register:I,errors:P,label:"Chargable to Occupant",className:"form-check-inline"}),(0,S.jsx)(g.Z,{type:"radio",name:"chargable",value:2,register:I,errors:P,label:"Management",className:"form-check-inline"})]})}),(0,S.jsx)(i.A,{lg:4,children:(0,S.jsx)(o.A.Group,{className:"mb-2 input-group",children:F&&C&&(0,S.jsxs)(g.Z,{label:"Repaired By",type:"select",name:"repaired_by",register:I,errors:P,className:"form-control-sm fs-5",containerClass:"mb-3",children:[(0,S.jsx)("option",{value:"",children:"Select Repaired By"}),F.data.map((e=>(0,S.jsx)("option",{value:e.user.id.toString(),children:e.user.name})))]})})}),(0,S.jsx)(i.A,{lg:4,children:(0,S.jsxs)(o.A.Group,{className:"mb-2 input-group",children:[(0,S.jsx)(o.A.Label,{className:"me-2",children:"Status:"}),(0,S.jsx)(g.Z,{type:"radio",id:"repair_status",name:"status",value:1,errors:P,register:I,label:"Pending",className:"form-check-inline"}),(0,S.jsx)(g.Z,{type:"radio",name:"status",id:"repair_status",value:2,errors:P,register:I,label:"In Progress",className:"form-check-inline"}),(0,S.jsx)(g.Z,{type:"radio",name:"status",id:"repair_status",value:3,errors:P,register:I,label:"On Hold",className:"form-check-inline"}),(0,S.jsx)(g.Z,{type:"radio",name:"status",id:"repair_status",value:4,errors:P,register:I,label:"Done",className:"form-check-inline"})]})})]})]})}),(0,S.jsx)(l.A,{children:(0,S.jsx)(i.A,{lg:3,className:"mb-2",children:$?(0,S.jsx)(_.m,{}):(0,S.jsx)(d.A,{variant:"primary",type:"submit",children:"Submit"})})})]}),(0,S.jsx)(l.A,{children:K&&K.id&&(0,S.jsx)(y.L,{admin:!0,load:$,id:K.id})})]})},w=()=>(0,S.jsxs)(r.Fragment,{children:[(0,S.jsx)(c.A,{breadCrumbItems:[{label:"Dashboard",path:"/dashboard-1"},{label:"Maintanance",path:"/maintanance"},{label:"Maintanance Edit",path:"/maintanance",active:!0}],title:"Maintanance Request"}),(0,S.jsx)(l.A,{children:(0,S.jsx)(i.A,{children:(0,S.jsx)(N,{})})})]})},96944:(e,s,a)=>{a.d(s,{L:()=>g});var r=a(9950),t=a(82612),n=a(13059),l=a(27081),i=a(68459),o=a(56035),m=a(86994),d=a(6863),c=a(97937),h=a(88249),u=a(9449),x=a(26473),j=a(60666),p=a(44414);const g=e=>{let{id:s,admin:a=!1,load:g}=e;const b=(0,l.wA)(),[A,v]=(0,r.useState)(!1),[_,y]=(0,r.useState)([]),S=(0,x.t)(j.Ik().shape({message:j.Yj().required("Please enter message")}));let{user:N,customerUser:w}=(0,l.d4)((e=>({user:e.Auth.user,customerUser:e.CustomerAuth.user})));const[f,k]=(0,r.useState)(""),[C,T]=(0,r.useState)("");N||(N=w);const Z=(0,u.mN)({defaultValues:{},resolver:S}),{handleSubmit:L,register:F,setError:D,control:O,watch:I,setValue:M,reset:q,formState:{errors:E}}=Z;(0,r.useEffect)((()=>{b((0,n.OH)(s)).unwrap().then((e=>{e&&y(e)}))}),[s,A,g]);const Y=L((async e=>{v(!0),b((0,n.gs)(e)).unwrap().then((e=>{e&&!0===e.status&&(k(e.message),T(""),v(!1),q())})).catch((e=>{for(var s in e.errors)try{D(s,{message:e.errors[s].toString()})}catch(a){}v(!1)}))}));return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(i.A,{children:[_&&(0,p.jsx)("h4",{children:"Updates"}),_&&_.map((e=>(0,p.jsxs)(o.A,{children:[(0,p.jsx)(m.A,{className:"border-bottom",children:(0,p.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,p.jsx)("strong",{children:e.sender&&e.sender.name}),(0,p.jsx)("div",{children:e.created_at})]})}),(0,p.jsx)(d.A,{dangerouslySetInnerHTML:{__html:e.message.toString()}})]})))]}),(0,p.jsxs)("form",{onSubmit:Y,className:"mb-2",children:[f&&(0,p.jsx)("div",{className:"alert alert-success",children:f}),C&&(0,p.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:C}),!a&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(t.Z,{type:"textarea",rows:"5",className:"mb-2",name:"message",title:"Message",register:F}),(0,p.jsx)(t.Z,{type:"hidden",name:"maintanance_id",value:s,register:F}),N&&(0,p.jsx)(t.Z,{type:"hidden",name:"sender_id",value:N.user_id,register:F}),(0,p.jsx)(i.A,{lg:3,children:A?(0,p.jsx)(h.m,{}):(0,p.jsx)(c.A,{variant:"primary",type:"submit",children:"Submit"})})]})]})]})}}}]);