"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[8201],{63112:(e,a,n)=>{n.d(a,{A:()=>l});var s=n(72348),t=n.n(s),r=(n(4434),n(44414));const l=e=>(0,r.jsx)(r.Fragment,{children:e.showTimeSelectOnly?(0,r.jsx)(t(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:"hh:mm",className:"form-control",minDate:e.minDate,scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,maxDate:e.maxDate,disabled:e.disabled,monthsShown:e.monthsShown,wrapperClassName:"is-invalid",showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"}):(0,r.jsx)(t(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:e.dateFormat,minDate:e.minDate,disabled:e.disabled,wrapperClassName:"is-invalid",className:"form-control",maxDate:e.maxDate,showMonthDropdown:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0,monthsShown:e.monthsShown,showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"})})},98201:(e,a,n)=>{n.r(a),n.d(a,{default:()=>S});var s=n(9950),t=n(9449),r=n(471),l=n(86781),i=n(68459),o=n(64055),d=n(584),c=n(90729),m=n(97937),u=n(86133),h=n(13059),x=n(27081),g=n(28429),p=n(42074),j=n(80183),v=n(68984),b=n(44051),_=n.n(b),A=n(26473),y=n(60666),w=n(63112),N=n(88249),f=n(44414);const k=()=>{var e;const a=(0,A.t)(y.Ik().shape({work_requested:y.Yj().required("Please select Work Requested"),tanent_name:y.Yj().required("Please enter tanent name")})),[n,u]=(0,s.useState)(""),[b,k]=(0,s.useState)(""),[S,C]=(0,s.useState)();let{user:D,customerUser:T}=(0,x.d4)((e=>({user:e.Auth.user,customerUser:e.CustomerAuth.user})));D||(D=T);const Z=(0,t.mN)({defaultValues:{},resolver:a}),{handleSubmit:F,register:L,setError:O,control:I,watch:R,setValue:q,reset:M,formState:{errors:P}}=Z,E=(0,x.wA)();let Y=(0,s.useRef)(null),G=(0,s.useRef)(null);const[U,W]=(0,s.useState)(new Date),[B,z]=(0,s.useState)(new Date),[V,H]=(0,s.useState)(new Date),[X,$]=(0,s.useState)(!1);(0,s.useEffect)((()=>{E((0,h.Xs)(K.id)).unwrap().then((e=>{var a,n,s;null!==e&&(q("id",e.id),q("tanent_name",null===e||void 0===e?void 0:e.tanent_name),q("work_requested",null===e||void 0===e?void 0:e.work_requested),q("tanent_signature",null===e||void 0===e?void 0:e.tanent_signature),null===(a=Y.current)||void 0===a||a.fromDataURL(null===e||void 0===e?void 0:e.tanent_signature),G.current&&G.current.fromDataURL(null===e||void 0===e?void 0:e.service_signature),q("service_signature",null===e||void 0===e?void 0:e.service_signature),q("phone",null===e||void 0===e?void 0:e.phone),q("ok_to_enter",null===e||void 0===e?void 0:e.ok_to_enter.toString()),q("action_taken",null!==(n=null===e||void 0===e?void 0:e.action_taken)&&void 0!==n?n:""),q("action_date",null===e||void 0===e?void 0:e.action_date),q("work_done",null===e||void 0===e?void 0:e.work_done),q("status",null===e||void 0===e?void 0:e.status.toString()),null!==e&&void 0!==e&&e.chargable&&q("chargable",null===e||void 0===e?void 0:e.chargable.toString()),null!==e&&void 0!==e&&e.action_date&&W(new Date(null===e||void 0===e?void 0:e.action_date)),null!==e&&void 0!==e&&e.time_in&&z(new Date("2024-12-12 "+(null===e||void 0===e?void 0:e.time_in))),null!==e&&void 0!==e&&e.time_out&&H(new Date("2024-12-12 "+(null===e||void 0===e?void 0:e.time_out))),E((0,j.Tv)(e.user_id)).unwrap().then((e=>{C(e)})),Y.current&&(null===(s=Y.current)||void 0===s||s.off()))})).catch((e=>k(e)))}),[]);const J=F((async e=>{$(!0),E((0,h.$L)(e)).unwrap().then((e=>{e&&!0===e.status&&(u(e.message),k(""),window.scrollTo({top:0,behavior:"smooth"}),$(!1))})).catch((e=>{for(var a in e.errors)try{O(a,{message:e.errors[a].toString()})}catch(n){}$(!1)}))})),K=(0,g.g)();return(0,f.jsxs)(f.Fragment,{children:[n&&(0,f.jsxs)("div",{className:"alert alert-success",children:[n,(0,f.jsx)(p.N_,{to:"/maintanance-admin",children:" Back to Maintanance."})]}),b&&(0,f.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:b}),(0,f.jsxs)("form",{onSubmit:J,children:[(0,f.jsx)(r.A,{children:(0,f.jsxs)(r.A.Body,{children:[(0,f.jsxs)(l.A,{children:[(0,f.jsx)(i.A,{lg:4,children:(0,f.jsxs)(o.A.Group,{className:"mb-3",children:[(0,f.jsx)(o.A.Label,{className:"me-2",children:"Building"}),(0,f.jsx)(o.A.Label,{children:S&&S.user.apartment_name}),(0,f.jsx)(v.Z,{type:"hidden",name:"user_id",value:D.user_id,disabled:!0,register:L}),(0,f.jsx)(v.Z,{type:"hidden",name:"id",register:L,disabled:!0})]})}),(0,f.jsx)(i.A,{lg:3,children:(0,f.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,f.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Apt"}),(0,f.jsx)(o.A.Label,{children:S&&S.user.flat_name}),(0,f.jsx)(v.Z,{type:"hidden",disabled:!0,name:"flat_id",value:S&&(null===(e=S.user.flat)||void 0===e?void 0:e.flat_id),register:L})]})})]}),(0,f.jsxs)(l.A,{children:[(0,f.jsx)(i.A,{lg:4,children:(0,f.jsx)(v.Z,{label:"Tanent Name",type:"text",disabled:!0,register:L,name:"tanent_name",errors:P,className:"form-control-sm ",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"tanent_name")}),(0,f.jsx)(i.A,{lg:3,children:(0,f.jsx)(v.Z,{label:"Phone",type:"text",disabled:!0,register:L,name:"phone",errors:P,className:"form-control-sm",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"phone")}),(0,f.jsx)(i.A,{lg:5,children:(0,f.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,f.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Ok to Enter"}),(0,f.jsx)(v.Z,{type:"radio",disabled:!0,className:"form-check-inline",name:"ok_to_enter",label:"Yes",value:"1",register:L}),(0,f.jsx)(v.Z,{type:"radio",disabled:!0,className:"form-check-inline",name:"ok_to_enter",label:"No",value:"2",register:L})]})})]}),(0,f.jsx)(l.A,{children:(0,f.jsx)(i.A,{lg:12,children:(0,f.jsx)(v.Z,{type:"textarea",title:"Work Requested",name:"work_requested",disabled:!0,placeholder:"Work Requested",className:"mb-3",register:L,errors:P,style:{height:"100px"}})})}),(0,f.jsx)(l.A,{children:(0,f.jsx)(i.A,{lg:12,children:(0,f.jsxs)(d.A,{className:"mb-3",children:[(0,f.jsx)(c.A,{className:"me-1 ",children:"Signature"}),(0,f.jsx)(t.xI,{control:I,name:"tanent_signature",render:e=>{let{field:a}=e;return(0,f.jsx)(_(),{ref:Y,onEnd:()=>a.onChange((()=>{if(Y.current)return Y.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,f.jsx)(v.Z,{name:"tanent_signature",register:L,errors:P,disabled:!0,className:"is-invalid",type:"hidden"}),P&&P.tanent_signature?(0,f.jsx)(o.A.Control.Feedback,{type:"invalid",children:P.tanent_signature.message}):null]})})})]})}),(0,f.jsx)(r.A,{children:(0,f.jsxs)(r.A.Body,{children:[(0,f.jsx)(l.A,{children:(0,f.jsx)(i.A,{lg:12,children:(0,f.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,f.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Action Taken"}),(0,f.jsx)(v.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:L,value:1,label:"Work Completed"}),(0,f.jsx)(v.Z,{type:"radio",className:"form-check-inline",name:"action_taken",value:2,register:L,label:"Repaired Temporarily"}),(0,f.jsx)(v.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:L,value:3,label:"Parts on Order"}),(0,f.jsx)(v.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:L,value:4,label:"Outside Contractor Called"})]})})}),(0,f.jsxs)(l.A,{children:[(0,f.jsx)(i.A,{lg:4,children:(0,f.jsxs)(d.A,{className:"input-group mb-3 ",children:[(0,f.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Date"}),(0,f.jsx)(v.Z,{type:"hidden",register:L,name:"action_date",value:U.toISOString().split("T")[0]},"action_date"),(0,f.jsx)(w.A,{hideAddon:!0,value:U,showTimeSelect:!1,inputClass:"form-control-sm ",dateFormat:"MM-dd-yyyy",onChange:e=>{W(e),q("action_date",e.toLocaleString("sv-SE"))}}),P&&P.action_date?(0,f.jsx)(o.A.Control.Feedback,{type:"invalid",children:P.action_date.message}):null]})}),(0,f.jsx)(i.A,{lg:4,children:(0,f.jsxs)(d.A,{className:"input-group mb-3 ",children:[(0,f.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time In"}),(0,f.jsx)(v.Z,{type:"hidden",register:L,name:"time_in",errors:P},"time_in"),(0,f.jsx)(w.A,{value:B,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{z(e),q("time_in",B.toLocaleTimeString("it-IT"))}}),P&&P.time_in?(0,f.jsx)(o.A.Control.Feedback,{type:"invalid",children:P.time_in.message}):null]})}),(0,f.jsx)(i.A,{lg:4,children:(0,f.jsxs)(d.A,{className:"input-group mb-3 ",children:[(0,f.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time Out"}),(0,f.jsx)(v.Z,{type:"hidden",register:L,name:"time_out",errors:P},"time_out"),(0,f.jsx)(w.A,{value:V,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{H(e),q("time_out",V.toLocaleTimeString("it-IT"))}}),P&&P.time_out?(0,f.jsx)(o.A.Control.Feedback,{type:"invalid",children:P.time_out.message}):null]})})]}),(0,f.jsx)(l.A,{children:(0,f.jsx)(i.A,{lg:12,children:(0,f.jsx)(v.Z,{type:"textarea",title:"Work Done",name:"work_done",placeholder:"Work Done",className:"mb-3",register:L,errors:P,style:{height:"125px"}})})}),(0,f.jsx)(l.A,{children:(0,f.jsx)(i.A,{lg:12,children:(0,f.jsxs)(d.A,{className:"mb-3",children:[(0,f.jsx)(c.A,{className:"me-1 ",children:"Service Person Signature"}),(0,f.jsx)(t.xI,{control:I,name:"service_signature",render:e=>{let{field:a}=e;return(0,f.jsx)(_(),{ref:G,onEnd:()=>a.onChange((()=>{if(G.current)return G.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,f.jsx)(v.Z,{name:"service_signature",register:L,errors:P,className:"is-invalid",type:"hidden"})]})})}),(0,f.jsx)(l.A,{children:(0,f.jsx)(i.A,{lg:12,children:(0,f.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,f.jsx)(v.Z,{type:"radio",name:"chargable",value:1,register:L,label:"Chargable to Occupant",className:"form-check-inline"}),(0,f.jsx)(v.Z,{type:"radio",name:"chargable",value:2,register:L,label:"Management",className:"form-check-inline"}),(0,f.jsx)(v.Z,{type:"hidden",name:"repaired_by",register:L,value:D.user_id})]})})}),(0,f.jsx)(l.A,{children:(0,f.jsx)(i.A,{lg:12,children:(0,f.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,f.jsx)(o.A.Label,{children:"Status:"}),(0,f.jsx)(v.Z,{type:"radio",id:"repair_status",name:"status",value:1,register:L,label:"Pending",className:"form-check-inline"}),(0,f.jsx)(v.Z,{type:"radio",name:"status",id:"repair_status",value:2,register:L,label:"In Progress",className:"form-check-inline"}),(0,f.jsx)(v.Z,{type:"radio",name:"status",id:"repair_status",value:3,register:L,label:"On Hold",className:"form-check-inline"}),(0,f.jsx)(v.Z,{type:"radio",name:"status",id:"repair_status",value:4,register:L,label:"Done",className:"form-check-inline"})]})})})]})}),(0,f.jsx)(l.A,{children:(0,f.jsx)(i.A,{lg:3,children:X?(0,f.jsx)(N.m,{}):(0,f.jsx)(m.A,{variant:"primary",type:"submit",children:"Submit"})})})]})]})},S=()=>(0,f.jsxs)(s.Fragment,{children:[(0,f.jsx)(u.A,{breadCrumbItems:[{label:"Dashboard",path:"/dashboard-1"},{label:"Maintanance",path:"/maintanance"},{label:"Maintanance Edit",path:"/maintanance",active:!0}],title:"Maintanance Request"}),(0,f.jsx)(l.A,{children:(0,f.jsx)(i.A,{children:(0,f.jsx)(k,{})})})]})}}]);