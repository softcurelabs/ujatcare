"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[306],{63790:(e,s,a)=>{a.d(s,{A:()=>r});var t=a(9950),l=a(42074),n=a(48738),i=a.n(n),c=a(44414);const r=e=>{let{tableProps:s,sizePerPageList:a}=e;const[n,r]=(0,t.useState)(s.pageCount),[d,o]=(0,t.useState)(s.state.pageIndex);(0,t.useEffect)((()=>{r(s.pageCount),o(s.state.pageIndex)}),[s.pageCount,s.state.pageIndex]);const h=(0,t.useCallback)(((e,s)=>e.filter((e=>e<=n))),[n]),x=(0,t.useCallback)(((e,s)=>s<7?h([1,2,3,4,5,6],s):e%5>=0&&e>4&&e+2<s?[1,e-1,e,e+1,s]:e%5>=0&&e>4&&e+2>=s?[1,s-3,s-2,s-1,s]:[1,2,3,4,5,s]),[h]),m=e=>{if(e===d)return;const a=x(e,n);j(h(a,n)),s.gotoPage(e)};(0,t.useEffect)((()=>{const e=x(null,n);j(e)}),[n,x]);const[u,j]=(0,t.useState)(x(null,n)),g=d;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("div",{className:"d-lg-flex align-items-center text-center pb-1",children:[a.length>0&&(0,c.jsxs)("div",{className:"d-inline-block me-3",children:[(0,c.jsx)("label",{className:"me-1",children:"Display :"}),(0,c.jsx)("select",{value:s.state.pageSize,onChange:e=>{s.setPageSize(Number(e.target.value))},className:"form-select d-inline-block w-auto",children:(a||[]).map(((e,s)=>(0,c.jsx)("option",{value:e.value,children:e.text},s)))})]}),(0,c.jsxs)("span",{className:"me-3",children:["Page"," ",(0,c.jsxs)("strong",{children:[d," of ",s.pageOptions.length]})," "]}),(0,c.jsxs)("ul",{className:"pagination pagination-rounded d-inline-flex ms-auto align-item-center mb-0",children:[(0,c.jsx)("li",{className:i()("page-item","paginate_button","previous",{disabled:1===g}),onClick:()=>{1!==g&&m(g-1)},children:(0,c.jsx)(l.N_,{to:"#",className:"page-link",children:(0,c.jsx)("i",{className:"mdi mdi-chevron-left"})})},"prevpage"),(u||[]).map(((e,s,a)=>a[s-1]+1<e?(0,c.jsxs)(t.Fragment,{children:[(0,c.jsx)("li",{className:"page-item disabled d-none d-xl-inline-block",children:(0,c.jsx)(l.N_,{to:"#",className:"page-link",children:"..."})}),(0,c.jsx)("li",{className:i()("page-item","d-none","d-xl-inline-block",{active:g===e}),onClick:s=>m(e),children:(0,c.jsx)(l.N_,{to:"#",className:"page-link",children:e})})]},e):(0,c.jsx)("li",{className:i()("page-item","d-none","d-xl-inline-block",{active:g===e}),onClick:s=>m(e),children:(0,c.jsx)(l.N_,{to:"#",className:"page-link",children:e})},e))),(0,c.jsx)("li",{className:i()("page-item","paginate_button","next",{disabled:g===s.pageCount}),onClick:()=>{g!==s.pageCount&&m(g+1)},children:(0,c.jsx)(l.N_,{to:"#",className:"page-link",children:(0,c.jsx)("i",{className:"mdi mdi-chevron-right"})})},"nextpage")]})]})})}},50306:(e,s,a)=>{a.r(s),a.d(s,{default:()=>b});var t=a(9950),l=a(56035),n=a(1093),i=a(86781),c=a(68459),r=a(97937),d=a(48738),o=a.n(d),h=a(86133),x=a(28429),m=a(27081),u=a(63790),j=a(13059),g=a(44414);const p=e=>{let{maintanance:s}=e;const a=(0,m.wA)();let{user:i,userCustomer:c}=(0,m.d4)((e=>({user:e.Auth.user,userCustomer:e.CustomerAuth.user})));c&&(i=c);const[r,d]=(0,t.useState)(!1),[o,h]=(0,t.useState)(""),[x,u]=(0,t.useState)("");return(0,t.useEffect)((()=>{a((0,j.kz)(1))}),[r]),(0,g.jsx)(l.A,{children:(0,g.jsxs)(l.A.Body,{children:[o&&(0,g.jsx)("div",{className:"alert alert-success",children:o}),x&&(0,g.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:x}),(0,g.jsx)("div",{className:"table-responsive",children:(0,g.jsxs)(n.A,{className:"table table-centered react-table dt-responsive nowrap w-100",children:[(0,g.jsx)("thead",{className:"table-light",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"ID"}),(0,g.jsx)("th",{children:"Requested By"}),(0,g.jsx)("th",{children:"Suite"}),(0,g.jsx)("th",{children:"Work to be done"}),(0,g.jsx)("th",{children:"Assignee"}),(0,g.jsx)("th",{children:"Status"}),(0,g.jsx)("th",{children:"Created At"}),(0,g.jsx)("th",{children:"Resolved At"}),(0,g.jsx)("th",{children:"Actions"})]})}),(0,g.jsx)("tbody",{children:s&&s.data.length>0?s.data.map(((e,s)=>(0,g.jsxs)("tr",{role:"row",children:[(0,g.jsx)("td",{role:"cell",children:e.id}),(0,g.jsx)("td",{role:"cell",children:e.tanent_name}),(0,g.jsx)("td",{role:"cell",children:e.flat_name}),(0,g.jsx)("td",{role:"cell",children:e.work_requested}),(0,g.jsx)("td",{role:"cell",children:e.repaired_username}),(0,g.jsx)("td",{role:"cell",children:(0,g.jsx)(N,{status:e.status_name})}),(0,g.jsx)("td",{role:"cell",children:e.created_at}),(0,g.jsx)("td",{role:"cell",children:e.action_date}),(0,g.jsx)("td",{role:"cell",children:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(t.Fragment,{children:(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("a",{href:`maintanance/${e.id}`,title:"View",children:(0,g.jsx)("i",{className:"mdi mdi-eye me-2 text-muted font-18 vertical-middle"})})})})})})]},s))):(0,g.jsx)("p",{children:"No Data Found"})})]})})]})})},N=e=>{let{status:s}=e;return(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("span",{className:o()("badge",{"bg-success":"Done"===s,"bg-secondary text-light":["In Progress","Pending","On Hold"].includes(s)}),children:s})})},b=()=>{const e=(0,m.wA)(),[s,a]=(0,t.useState)(1),{maintanance:l}=(0,m.d4)((e=>({maintanance:e.Maintanance.maintanance})));let n=(0,x.Zp)();return(0,t.useEffect)((()=>{e((0,j.kz)(s))}),[s]),(0,g.jsxs)(t.Fragment,{children:[(0,g.jsx)(h.A,{breadCrumbItems:[{label:"All Maintenance Requests",path:"/maintanance",active:!0}],title:"All Maintenance Requests"}),(0,g.jsx)(i.A,{children:(0,g.jsxs)(c.A,{lg:12,children:[(0,g.jsxs)(r.A,{className:"waves-effect waves-light mb-3",onClick:()=>{n("/maintanance/create")},children:[(0,g.jsx)("i",{className:"mdi mdi-plus-circle me-1"})," Add New"]}),l&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(p,{maintanance:l}),(0,g.jsx)(u.A,{tableProps:{pageCount:l.last_page,state:{pageIndex:l.current_page},pageOptions:{length:l.total},gotoPage:e=>{a(e)}},sizePerPageList:[{text:"10",value:10}]})]})]})})]})}}}]);