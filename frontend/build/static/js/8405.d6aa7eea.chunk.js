"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[8405],{20800:(e,a,s)=>{s.d(a,{Z:()=>t});var r=s(61378),l=s.n(r),n=(s(72632),s(46417));const t=e=>(0,n.jsx)(n.Fragment,{children:e.showTimeSelectOnly?(0,n.jsx)(l(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:"hh:mm",className:"form-control",minDate:e.minDate,scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,maxDate:e.maxDate,disabled:e.disabled,monthsShown:e.monthsShown,wrapperClassName:"is-invalid",showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"}):(0,n.jsx)(l(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:e.dateFormat,minDate:e.minDate,disabled:e.disabled,wrapperClassName:"is-invalid",className:"form-control",maxDate:e.maxDate,showMonthDropdown:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0,monthsShown:e.monthsShown,showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"})})},20192:(e,a,s)=>{s.d(a,{Z:()=>i});s(47313);var r=s(63849),l=s(31616),n=s(52198),t=s(46417);const i=e=>(0,t.jsx)(r.Z,{children:(0,t.jsx)(l.Z,{children:(0,t.jsxs)("div",{className:"page-title-box",children:[(0,t.jsx)("div",{className:"page-title-right",children:(0,t.jsxs)(n.Z,{className:"m-0",children:[(0,t.jsx)(n.Z.Item,{href:"/",children:"Home"}),(e.breadCrumbItems||[]).map(((e,a)=>e.active?(0,t.jsx)(n.Z.Item,{active:!0,children:e.label},a):(0,t.jsx)(n.Z.Item,{href:e.path,children:e.label},a)))]})}),(0,t.jsx)("h4",{className:"page-title",children:e.title})]})})})},52487:(e,a,s)=>{s.d(a,{y:()=>h,J:()=>t});var r=s(47313),l=s(75627),n=s(46417);const t=e=>{let{defaultValues:a,resolver:s,children:t,onSubmit:i,formClass:o}=e;const d=(0,l.cI)({defaultValues:a,resolver:s}),{handleSubmit:c,register:m,control:h,formState:{errors:u}}=d;return(0,n.jsx)("form",{onSubmit:c(i),className:o,noValidate:!0,children:Array.isArray(t)?t.map((e=>e.props&&e.props.name?r.createElement(e.type,{...{...e.props,register:m,key:e.props.name,errors:u,control:h}}):e)):t})};var i=s(38394),o=s(88178),d=s(72884),c=s.n(d);const m=e=>{let{name:a,placeholder:s,refCallback:l,errors:t,control:d,register:m,className:h}=e;const[u,p]=(0,r.useState)(!1);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.Z,{className:"mb-0",children:[(0,n.jsx)(o.Z.Control,{type:u?"text":"password",placeholder:s,name:a,id:a,as:"input",ref:e=>{l&&l(e)},className:h,isInvalid:!(!t||!t[a]),...m?m(a):{},autoComplete:a}),(0,n.jsx)("div",{className:c()("input-group-text","input-group-password",{"show-password":u}),"data-password":u?"true":"false",children:(0,n.jsx)("span",{className:"password-eye",onClick:()=>{p(!u)}})})]})})},h=e=>{let{label:a,type:s,name:r,placeholder:l,register:t,errors:i,control:d,className:c,labelClassName:h,containerClass:u,refCallback:p,children:x,rows:g,...j}=e;const b="textarea"===s?"textarea":"select"===s?"select":"input";return(0,n.jsx)(n.Fragment,{children:"hidden"===s?(0,n.jsx)("input",{type:s,name:r,id:r,...t?t(r):{},...j,className:c}):(0,n.jsx)(n.Fragment,{children:"password"===s?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.Z.Group,{className:u,children:[a?(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(o.Z.Label,{className:h,children:a})," ",x," "]}):null,(0,n.jsx)(m,{name:r,placeholder:l,refCallback:p,errors:i,register:t,className:c}),i&&i[r]?(0,n.jsx)(o.Z.Control.Feedback,{type:"invalid",className:"d-block",children:i[r].message}):null]})}):(0,n.jsx)(n.Fragment,{children:"checkbox"===s||"radio"===s?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(o.Z.Group,{className:u,children:[(0,n.jsx)(o.Z.Check,{type:s,label:a,name:r,id:r,ref:e=>{p&&p(e)},className:c,isInvalid:!(!i||!i[r]),...t?t(r):{},...j}),i&&i[r]?(0,n.jsx)(o.Z.Control.Feedback,{type:"invalid",children:i[r].message}):null]})}):(0,n.jsxs)(o.Z.Group,{className:u,children:[a?(0,n.jsx)(o.Z.Label,{className:h,children:a}):null,(0,n.jsx)(o.Z.Control,{type:s,placeholder:l,name:r,id:r,as:b,ref:e=>{p&&p(e)},className:c,isInvalid:!(!i||!i[r]),...t?t(r):{},rows:g,...j,autoComplete:r,children:x||null}),i&&i[r]?(0,n.jsx)(o.Z.Control.Feedback,{type:"invalid",children:i[r].message}):null]})})})})}},98405:(e,a,s)=>{s.r(a),s.d(a,{default:()=>w});var r=s(47313),l=s(75627),n=s(51449),t=s(63849),i=s(31616),o=s(88178),d=s(87021),c=s(41709),m=s(20192),h=s(93633),u=s(56352),p=s(58467),x=s(2135),g=s(33689),j=s(52487),b=s(14056),v=s.n(b),Z=s(62563),y=s(3463),_=s(20800),f=s(46417);const N=()=>{var e;const a=(0,Z.X)(y.Ry().shape({work_requested:y.Z_().required("Please select Work Requested"),tanent_name:y.Z_().required("Please enter tanent name"),phone:y.Z_().required("Please enter phone name"),ok_to_enter:y.Z_().required("Please select ok to enter"),tanent_signature:y.Z_().required().matches(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/,"Signature must be png")})),[s,m]=(0,r.useState)(""),[b,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)();let{user:D,customerUser:F}=(0,u.v9)((e=>({user:e.Auth.user,customerUser:e.CustomerAuth.user})));D||(D=F);const T=(0,l.cI)({defaultValues:{},resolver:a}),{handleSubmit:I,register:L,setError:O,control:q,setValue:R,formState:{errors:M}}=T,P=(0,u.I0)();let A=(0,r.useRef)(null),G=(0,r.useRef)(null);const[U,E]=(0,r.useState)(new Date),[V,W]=(0,r.useState)(new Date),[Y,B]=(0,r.useState)(new Date);(0,r.useEffect)((()=>{P((0,g.fB)(D.user_id)).unwrap().then((e=>{S(e),P((0,h.JV)(J.id)).unwrap().then((e=>{var a;if(null!==e){var s,r;if(R("id",e.id),R("tanent_name",null===e||void 0===e?void 0:e.tanent_name),R("work_requested",null===e||void 0===e?void 0:e.work_requested),R("tanent_signature",null===e||void 0===e?void 0:e.tanent_signature),null===(a=A.current)||void 0===a||a.fromDataURL(null===e||void 0===e?void 0:e.tanent_signature),G.current&&G.current.fromDataURL(null===e||void 0===e?void 0:e.service_signature),R("phone",null===e||void 0===e?void 0:e.phone),R("ok_to_enter",null===e||void 0===e?void 0:e.ok_to_enter.toString()),null!==e&&void 0!==e&&e.action_taken&&R("action_taken",null===e||void 0===e?void 0:e.action_taken.toString()),R("work_done",null===e||void 0===e?void 0:e.work_done),R("status",null===e||void 0===e?void 0:e.status.toString()),null!==e&&void 0!==e&&e.chargable&&R("chargable",null===e||void 0===e?void 0:e.chargable.toString()),null!==e&&void 0!==e&&e.action_date&&E(new Date(null===e||void 0===e?void 0:e.action_date)),null!==e&&void 0!==e&&e.time_in&&W(new Date("2024-12-12 "+(null===e||void 0===e?void 0:e.time_in))),null!==e&&void 0!==e&&e.time_out&&W(new Date("2024-12-12 "+(null===e||void 0===e?void 0:e.time_out))),G)null===(s=G.current)||void 0===s||s.off();if(A)null===(r=A.current)||void 0===r||r.off()}})).catch((e=>N(e)))}))}),[D.user_id]);const z=I((async e=>{k(!0),P((0,h.fb)(e)).unwrap().then((e=>{e&&!0===e.status?(m(e.message),N(""),window.scrollTo({top:0,behavior:"smooth"})):N(null===e||void 0===e?void 0:e.message),k(!1)})).catch((e=>{for(var a in e.errors)try{O(a,{message:e.errors[a].toString()})}catch(s){}k(!1)}))})),J=(0,p.UO)();return(0,f.jsx)(f.Fragment,{children:(0,f.jsx)(n.Z,{children:(0,f.jsxs)(n.Z.Body,{children:[s&&(0,f.jsxs)("div",{className:"alert alert-success",children:[s,(0,f.jsx)(x.rU,{to:"/maintanance",children:" Back to Maintanance."})]}),b&&(0,f.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:b}),C&&(0,f.jsxs)("form",{onSubmit:z,children:[(0,f.jsxs)(t.Z,{children:[(0,f.jsx)(i.Z,{lg:4,children:(0,f.jsxs)(o.Z.Group,{className:"mb-3",children:[(0,f.jsx)(o.Z.Label,{className:"me-2",children:"Building"}),(0,f.jsx)(o.Z.Label,{children:C.user.apartment_name}),(0,f.jsx)(j.y,{type:"hidden",name:"user_id",value:D.user_id,register:L}),(0,f.jsx)(j.y,{type:"hidden",name:"id",register:L})]})}),(0,f.jsx)(i.Z,{lg:3,children:(0,f.jsxs)(o.Z.Group,{className:"mb-3 input-group",children:[(0,f.jsx)(o.Z.Label,{htmlFor:"small",className:"me-2",children:"Apt"}),(0,f.jsx)(o.Z.Label,{children:C.user.flat_name}),(0,f.jsx)(j.y,{type:"hidden",name:"flat_id",value:null===(e=C.user.flat)||void 0===e?void 0:e.flat_id,register:L})]})})]}),(0,f.jsxs)(t.Z,{children:[(0,f.jsx)(i.Z,{lg:4,children:(0,f.jsx)(j.y,{label:"Tanent Name",type:"text",register:L,name:"tanent_name",disabled:!0,errors:M,className:"form-control-sm ",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"tanent_name")}),(0,f.jsx)(i.Z,{lg:3,children:(0,f.jsx)(j.y,{label:"Phone",type:"text",register:L,name:"phone",disabled:!0,errors:M,className:"form-control-sm",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"phone")}),(0,f.jsx)(i.Z,{lg:5,children:(0,f.jsxs)(o.Z.Group,{className:"mb-3 input-group",children:[(0,f.jsx)(o.Z.Label,{htmlFor:"small",className:"me-2",children:"Ok to Enter"}),(0,f.jsx)(j.y,{type:"radio",className:"form-check-inline",name:"ok_to_enter",disabled:!0,label:"Yes",value:"1",register:L}),(0,f.jsx)(j.y,{type:"radio",className:"form-check-inline",name:"ok_to_enter",disabled:!0,label:"No",value:"2",register:L})]})})]}),(0,f.jsx)(t.Z,{children:(0,f.jsx)(i.Z,{lg:12,children:(0,f.jsx)(j.y,{type:"textarea",title:"Work Requested",name:"work_requested",placeholder:"Work Requested",className:"mb-3",disabled:!0,register:L,errors:M,style:{height:"100px"}})})}),(0,f.jsx)(t.Z,{children:(0,f.jsx)(i.Z,{lg:12,children:(0,f.jsxs)(d.Z,{className:"mb-3",children:[(0,f.jsx)(c.Z,{className:"me-1 ",children:"Signature"}),(0,f.jsx)(l.Qr,{control:q,name:"tanent_signature",render:e=>{let{field:a}=e;return(0,f.jsx)(v(),{ref:A,onEnd:()=>a.onChange((()=>{if(A.current)return A.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,f.jsx)(j.y,{name:"tanent_signature",register:L,errors:M,className:"is-invalid",type:"hidden"}),M&&M.tanent_signature?(0,f.jsx)(o.Z.Control.Feedback,{type:"invalid",children:M.tanent_signature.message}):null]})})}),(0,f.jsx)(t.Z,{children:(0,f.jsx)(i.Z,{lg:12,children:(0,f.jsxs)(o.Z.Group,{className:"mb-3 input-group",children:[(0,f.jsx)(o.Z.Label,{htmlFor:"small",className:"me-2",children:"Action Taken"}),(0,f.jsx)(j.y,{type:"radio",className:"form-check-inline",name:"action_taken",register:L,value:1,disabled:!0,label:"Work Completed"}),(0,f.jsx)(j.y,{type:"radio",className:"form-check-inline",name:"action_taken",value:2,disabled:!0,register:L,label:"Repaired Temporarily"}),(0,f.jsx)(j.y,{type:"radio",className:"form-check-inline",name:"action_taken",register:L,value:3,disabled:!0,label:"Parts on Order"}),(0,f.jsx)(j.y,{type:"radio",className:"form-check-inline",name:"action_taken",register:L,value:4,disabled:!0,label:"Outside Contractor Called"})]})})}),(0,f.jsxs)(t.Z,{children:[(0,f.jsx)(i.Z,{lg:4,children:(0,f.jsxs)(d.Z,{className:"input-group mb-3 ",children:[(0,f.jsx)(o.Z.Label,{htmlFor:"small",className:"me-2",children:"Date"}),(0,f.jsx)(j.y,{type:"hidden",register:L,name:"action_date",value:U.toISOString().split("T")[0]},"action_date"),(0,f.jsx)(_.Z,{hideAddon:!0,disabled:!0,value:U,showTimeSelect:!1,inputClass:"form-control-sm",dateFormat:"MM-dd-yyyy",onChange:e=>{E(e),R("action_date",e.toLocaleString("sv-SE"))}})]})}),(0,f.jsx)(i.Z,{lg:4,children:(0,f.jsxs)(d.Z,{className:"input-group mb-3 ",children:[(0,f.jsx)(o.Z.Label,{htmlFor:"small",className:"me-2",children:"Time In"}),(0,f.jsx)(j.y,{type:"hidden",register:L,name:"time_in"},"time_in"),(0,f.jsx)(_.Z,{value:V,disabled:!0,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{W(e),R("time_in",V.toLocaleTimeString("it-IT"))}})]})}),(0,f.jsx)(i.Z,{lg:4,children:(0,f.jsxs)(d.Z,{className:"input-group mb-3 ",children:[(0,f.jsx)(o.Z.Label,{htmlFor:"small",className:"me-2",children:"Time Out"}),(0,f.jsx)(j.y,{type:"hidden",register:L,name:"time_out"},"time_out"),(0,f.jsx)(_.Z,{value:Y,disabled:!0,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{W(e),R("time_out",Y.toLocaleTimeString("it-IT"))}})]})})]}),(0,f.jsx)(t.Z,{children:(0,f.jsx)(i.Z,{lg:12,children:(0,f.jsx)(j.y,{type:"textarea",title:"Work Done",name:"work_done",disabled:!0,placeholder:"Work Done",className:"mb-3",register:L,errors:M,style:{height:"125px"}})})}),(0,f.jsx)(t.Z,{children:(0,f.jsx)(i.Z,{lg:12,children:(0,f.jsxs)(d.Z,{className:"mb-3",children:[(0,f.jsx)(c.Z,{className:"me-1 ",children:"Service Person Signature"}),(0,f.jsx)(l.Qr,{control:q,name:"service_signature",render:e=>{let{field:a}=e;return(0,f.jsx)(v(),{ref:G,onEnd:()=>a.onChange((()=>{if(G.current)return G.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,f.jsx)(j.y,{name:"service_signature",register:L,errors:M,className:"is-invalid",type:"hidden"})]})})}),(0,f.jsx)(t.Z,{children:(0,f.jsx)(i.Z,{lg:12,children:(0,f.jsxs)(o.Z.Group,{className:"mb-3 input-group",children:[(0,f.jsx)(j.y,{type:"radio",name:"chargable",value:1,register:L,disabled:!0,label:"Chargable to Occupant",className:"form-check-inline"}),(0,f.jsx)(j.y,{type:"radio",name:"chargable",value:2,disabled:!0,register:L,label:"Management",className:"form-check-inline"})]})})}),(0,f.jsx)(t.Z,{children:(0,f.jsx)(i.Z,{lg:3})})]})]})})})},w=()=>(0,f.jsxs)(r.Fragment,{children:[(0,f.jsx)(m.Z,{breadCrumbItems:[{label:"Dashboard",path:"/dashboard-1"},{label:"Maintanance Create",path:"/maintanance/create",active:!0}],title:"Maintanance Request"}),(0,f.jsx)(t.Z,{children:(0,f.jsx)(i.Z,{children:(0,f.jsx)(N,{})})})]})}}]);