"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[4021],{63112:(e,a,s)=>{s.d(a,{A:()=>r});var t=s(72348),l=s.n(t),n=(s(4434),s(44414));const r=e=>(0,n.jsx)(n.Fragment,{children:e.showTimeSelectOnly?(0,n.jsx)(l(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:"hh:mm",className:"form-control",minDate:e.minDate,scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,maxDate:e.maxDate,disabled:e.disabled,monthsShown:e.monthsShown,wrapperClassName:"is-invalid",showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"}):(0,n.jsx)(l(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:e.dateFormat,minDate:e.minDate,disabled:e.disabled,wrapperClassName:"is-invalid",className:"form-control",maxDate:e.maxDate,showMonthDropdown:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0,monthsShown:e.monthsShown,showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"})})},24021:(e,a,s)=>{s.r(a),s.d(a,{default:()=>S});var t=s(9950),l=s(9449),n=s(56035),r=s(86781),i=s(68459),o=s(64055),m=s(584),c=s(97937),d=s(86133),h=s(13059),u=s(27081),p=s(42074),x=s(80183),j=s(82612),g=s(26473),b=s(60666),A=s(63112),N=s(88249),v=s(44414);const w=()=>{var e;const a=(0,g.t)(b.Ik().shape({work_requested:b.Yj().required("Please select Work Requested"),tanent_name:b.Yj().required("Please enter tanent name"),phone:b.Yj().required("Please enter phone name"),ok_to_enter:b.Yj().required("Please select ok to enter")})),[s,d]=(0,t.useState)(""),[w,S]=(0,t.useState)(""),[f,y]=(0,t.useState)();let{user:_,customerUser:k,users:C}=(0,u.d4)((e=>({user:e.Auth.user,users:e.User.occupants,customerUser:e.CustomerAuth.user})));_||(_=k);const T=(0,l.mN)({defaultValues:{},resolver:a}),{handleSubmit:D,register:Z,setError:F,control:O,setValue:L,reset:q,formState:{errors:I}}=T,M=(0,u.wA)();let Y=(0,t.useRef)(null);(0,t.useRef)(null);const[R,W]=(0,t.useState)(new Date),[P,G]=(0,t.useState)(new Date),[E,U]=(0,t.useState)(new Date),[B,z]=(0,t.useState)(!1),{admins:V}=(0,u.d4)((e=>({admins:e.User.users})));(0,t.useEffect)((()=>{M((0,x.mX)({page:1,limit:1e3})),M((0,x.hW)())}),[]);const X=D((async e=>{z(!0),M((0,h.v5)(e)).unwrap().then((e=>{var a;e&&!0===e.status&&(d(e.message),S(""),q(),null===(a=Y.current)||void 0===a||a.clear(),window.scrollTo({top:0,behavior:"smooth"}),z(!1))})).catch((e=>{for(var a in e.errors)try{F(a,{message:e.errors[a].toString()})}catch(s){}z(!1)}))}));return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(n.A,{children:(0,v.jsxs)(n.A.Body,{children:[s&&(0,v.jsxs)("div",{className:"alert alert-success",children:[s,(0,v.jsx)(p.N_,{to:"/maintanance-admin",children:" Back to Maintanance."})]}),w&&(0,v.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:w}),C&&(0,v.jsxs)(j.Z,{label:"Tenants",type:"select",name:"tenant",onChange:e=>{M((0,x.Tv)(e.target.value)).unwrap().then((e=>{y(e)}))},className:"form-control-sm fs-5",containerClass:"mb-3",children:[(0,v.jsx)("option",{value:"",children:"Select Tenant"}),C.map((e=>(0,v.jsxs)("option",{value:e.user.id.toString(),children:[e.user.name," - ",e.user.flat_name,"(",e.user.apartment_name,")"]})))]}),f&&(0,v.jsxs)("form",{onSubmit:X,children:[(0,v.jsxs)(r.A,{children:[(0,v.jsx)(i.A,{lg:4,children:(0,v.jsxs)(o.A.Group,{className:"mb-3",children:[(0,v.jsx)(o.A.Label,{className:"me-2",children:"Building"}),(0,v.jsx)(o.A.Label,{children:f.user.apartment_name}),(0,v.jsx)(j.Z,{type:"hidden",name:"user_id",value:f.user.id.toString(),register:Z})]})}),(0,v.jsx)(i.A,{lg:3,children:(0,v.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,v.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Suite"}),(0,v.jsx)(o.A.Label,{children:f.user.flat_name}),(0,v.jsx)(j.Z,{type:"hidden",name:"flat_id",value:null===(e=f.user.flat)||void 0===e?void 0:e.flat_id,register:Z})]})})]}),(0,v.jsxs)(r.A,{children:[(0,v.jsx)(i.A,{lg:4,children:(0,v.jsx)(j.Z,{label:"Tanent Name",type:"text",register:Z,name:"tanent_name",errors:I,className:"form-control-sm ",containerClass:"mb-3 input-group",labelClassName:"me-2",value:f.user.first_name,size:2},"tanent_name")}),(0,v.jsx)(i.A,{lg:3,children:(0,v.jsx)(j.Z,{label:"Phone",type:"text",register:Z,name:"phone",errors:I,value:f.phone_number,className:"form-control-sm",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"phone")}),(0,v.jsx)(i.A,{lg:5,children:(0,v.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,v.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Ok to Enter"}),(0,v.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"ok_to_enter",label:"Yes",checked:!0,value:1,register:Z}),(0,v.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"ok_to_enter",label:"No",value:2,register:Z})]})})]}),(0,v.jsx)(r.A,{children:(0,v.jsx)(i.A,{lg:12,children:(0,v.jsx)(j.Z,{type:"textarea",title:"Work Requested",name:"work_requested",placeholder:"Work Requested",className:"mb-3",register:Z,errors:I,style:{height:"125px"}})})}),(0,v.jsx)(r.A,{className:"d-none",children:(0,v.jsx)(i.A,{lg:12,children:(0,v.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,v.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Action Taken"}),(0,v.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:Z,value:1,disabled:!0,label:"Work Completed"}),(0,v.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"action_taken",value:2,disabled:!0,register:Z,label:"Repaired Temporarily"}),(0,v.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:Z,value:3,disabled:!0,label:"Parts on Order"}),(0,v.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:Z,value:4,disabled:!0,label:"Outside Contractor Called"})]})})}),(0,v.jsxs)(r.A,{className:"d-none",children:[(0,v.jsx)(i.A,{lg:4,children:(0,v.jsxs)(m.A,{className:"input-group mb-3 ",children:[(0,v.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Date"}),(0,v.jsx)(j.Z,{type:"hidden",register:Z,name:"action_date",value:R.toISOString().split("T")[0]},"action_date"),(0,v.jsx)(A.A,{hideAddon:!0,disabled:!0,value:R,showTimeSelect:!1,inputClass:"form-control-sm",dateFormat:"MM-dd-yyyy",onChange:e=>{W(e),L("action_date",e.toLocaleString("sv-SE"))}})]})}),(0,v.jsx)(i.A,{lg:4,children:(0,v.jsxs)(m.A,{className:"input-group mb-3 ",children:[(0,v.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time In"}),(0,v.jsx)(j.Z,{type:"hidden",register:Z,name:"time_in"},"time_in"),(0,v.jsx)(A.A,{value:P,disabled:!0,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{G(e),L("time_in",P.toLocaleTimeString("it-IT"))}})]})}),(0,v.jsx)(i.A,{lg:4,children:(0,v.jsxs)(m.A,{className:"input-group mb-3 ",children:[(0,v.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time Out"}),(0,v.jsx)(j.Z,{type:"hidden",register:Z,name:"time_out"},"time_out"),(0,v.jsx)(A.A,{value:E,disabled:!0,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{G(e),L("time_out",E.toLocaleTimeString("it-IT"))}})]})})]}),(0,v.jsx)(r.A,{className:"d-none",children:(0,v.jsx)(i.A,{lg:12,children:(0,v.jsx)(j.Z,{type:"textarea",title:"Work Done",name:"work_done",disabled:!0,placeholder:"Work Done",className:"mb-3",register:Z,errors:I,style:{height:"125px"}})})}),(0,v.jsx)(r.A,{className:"d-none",children:(0,v.jsx)(i.A,{lg:12,children:(0,v.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,v.jsx)(j.Z,{type:"radio",name:"chargable",value:1,register:Z,disabled:!0,label:"Chargable to Occupant",className:"form-check-inline"}),(0,v.jsx)(j.Z,{type:"radio",name:"chargable",value:2,disabled:!0,register:Z,label:"Management",className:"form-check-inline"})]})})}),(0,v.jsx)(r.A,{children:(0,v.jsx)(i.A,{lg:3,children:B?(0,v.jsx)(N.m,{}):(0,v.jsx)(c.A,{variant:"primary",type:"submit",children:"Submit"})})})]})]})})})},S=()=>(0,v.jsxs)(t.Fragment,{children:[(0,v.jsx)(d.A,{breadCrumbItems:[{label:"Dashboard",path:"/dashboard-1"},{label:"Maintanance Create",path:"/maintanance/create-admin",active:!0}],title:"Maintanance Request"}),(0,v.jsx)(r.A,{children:(0,v.jsx)(i.A,{children:(0,v.jsx)(w,{})})})]})}}]);