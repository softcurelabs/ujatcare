"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[1636],{91636:(e,s,r)=>{r.r(s),r.d(s,{default:()=>g});var a=r(47313),t=r(75627),l=r(65832),i=r(63849),n=r(31616),c=r(93298),d=r(51450),m=r(52487),o=r(58467),u=r(33689),h=r(1084),p=r(62563),f=r(3463),j=r(20253),x=r(46417);const b=()=>{const e=(0,h.I0)(),[s,r]=(0,a.useState)(""),[d,b]=(0,a.useState)(""),g=(0,p.X)(f.Ry().shape({})),{flats:y}=(0,h.v9)((e=>({flats:e.Flat.flats}))),[v,S]=(0,a.useState)(!0),Z=(0,o.s0)(),C=(0,o.UO)(),{register:k,handleSubmit:w,setValue:_,setError:E,formState:{errors:N}}=(0,t.cI)({defaultValues:{},resolver:g}),R=w((s=>{e((0,u.D0)(s)).unwrap().then((e=>{e&&!0===e.status&&r(e.message)})).catch((e=>{for(var s in e.errors)try{E(s,{message:e.errors[s].toString()})}catch(r){}}))}));return(0,a.useEffect)((()=>{e((0,j.i)()).unwrap().then((()=>{e((0,u.fB)(C.id)).unwrap().then((e=>{_("id",e.user.id),_("email",e.user.email),e.user.flat&&_("flat_id",e.user.flat.flat_id),_("role_id",e.user.role)})).catch((e=>b(e)))}))}),[C.id]),(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(l.Z,{children:(0,x.jsxs)(l.Z.Body,{children:[s&&(0,x.jsx)("div",{className:"alert alert-success",children:s}),d&&(0,x.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:d}),(0,x.jsx)(i.Z,{children:(0,x.jsx)(n.Z,{lg:6,children:(0,x.jsxs)("form",{onSubmit:R,className:v?"form-readonly":"",children:[(0,x.jsxs)("fieldset",{children:[(0,x.jsx)(m.y,{label:"Email",type:"email",register:k,name:"email",placeholder:"Email",containerClass:"mb-3",disabled:!0}),(0,x.jsxs)(m.y,{type:"select",label:"Role",name:"role_id",containerClass:"mb-3",register:k,errors:N,children:[(0,x.jsx)("option",{value:"",children:"Select Role"}),(0,x.jsx)("option",{value:"recident",children:"Recident"}),(0,x.jsx)("option",{value:"staff",children:"Staff"})]}),(0,x.jsx)(m.y,{type:"select",label:"Apartment#",name:"flat_id",containerClass:"mb-3",register:k,errors:N,children:y.length&&y.map((e=>(0,x.jsx)("optgroup",{label:e.name.toString(),children:e.flats.map((e=>(0,x.jsx)("option",{value:e.id,children:e.name},"flat"+e.id)))},"apartment".concat(e.id))))})]}),(0,x.jsx)(c.Z,{onClick:()=>Z(-1),variant:"primary",className:"me-2",type:"submit",children:"Back"}),(0,x.jsx)(c.Z,{variant:"primary",type:"submit",children:"Submit"})]})})})]})})})},g=()=>(0,x.jsxs)(a.Fragment,{children:[(0,x.jsx)(d.Z,{breadCrumbItems:[{label:"Users",path:"/user"},{label:"Assign Permission",path:"/user",active:!0}],title:"Assign Permission"}),(0,x.jsx)(i.Z,{children:(0,x.jsx)(n.Z,{children:(0,x.jsx)(b,{})})})]})}}]);