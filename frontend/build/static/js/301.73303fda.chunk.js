"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[301],{63790:(e,s,l)=>{l.d(s,{A:()=>d});var a=l(9950),t=l(42074),r=l(48738),n=l.n(r),i=l(44414);const d=e=>{let{tableProps:s,sizePerPageList:l}=e;const[r,d]=(0,a.useState)(s.pageCount),[c,o]=(0,a.useState)(s.state.pageIndex);(0,a.useEffect)((()=>{d(s.pageCount),o(s.state.pageIndex)}),[s.pageCount,s.state.pageIndex]);const h=(0,a.useCallback)(((e,s)=>e.filter((e=>e<=r))),[r]),x=(0,a.useCallback)(((e,s)=>s<7?h([1,2,3,4,5,6],s):e%5>=0&&e>4&&e+2<s?[1,e-1,e,e+1,s]:e%5>=0&&e>4&&e+2>=s?[1,s-3,s-2,s-1,s]:[1,2,3,4,5,s]),[h]),j=e=>{if(e===c)return;const l=x(e,r);m(h(l,r)),s.gotoPage(e)};(0,a.useEffect)((()=>{const e=x(null,r);m(e)}),[r,x]);const[u,m]=(0,a.useState)(x(null,r)),g=c;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"d-lg-flex align-items-center text-center pb-1",children:[l.length>0&&(0,i.jsxs)("div",{className:"d-inline-block me-3",children:[(0,i.jsx)("label",{className:"me-1",children:"Display :"}),(0,i.jsx)("select",{value:s.state.pageSize,onChange:e=>{s.setPageSize(Number(e.target.value))},className:"form-select d-inline-block w-auto",children:(l||[]).map(((e,s)=>(0,i.jsx)("option",{value:e.value,children:e.text},s)))})]}),(0,i.jsxs)("span",{className:"me-3",children:["Page"," ",(0,i.jsxs)("strong",{children:[c," of ",s.pageOptions.length]})," "]}),(0,i.jsxs)("ul",{className:"pagination pagination-rounded d-inline-flex ms-auto align-item-center mb-0",children:[(0,i.jsx)("li",{className:n()("page-item","paginate_button","previous",{disabled:1===g}),onClick:()=>{1!==g&&j(g-1)},children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:(0,i.jsx)("i",{className:"mdi mdi-chevron-left"})})},"prevpage"),(u||[]).map(((e,s,l)=>l[s-1]+1<e?(0,i.jsxs)(a.Fragment,{children:[(0,i.jsx)("li",{className:"page-item disabled d-none d-xl-inline-block",children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:"..."})}),(0,i.jsx)("li",{className:n()("page-item","d-none","d-xl-inline-block",{active:g===e}),onClick:s=>j(e),children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:e})})]},e):(0,i.jsx)("li",{className:n()("page-item","d-none","d-xl-inline-block",{active:g===e}),onClick:s=>j(e),children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:e})},e))),(0,i.jsx)("li",{className:n()("page-item","paginate_button","next",{disabled:g===s.pageCount}),onClick:()=>{g!==s.pageCount&&j(g+1)},children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:(0,i.jsx)("i",{className:"mdi mdi-chevron-right"})})},"nextpage")]})]})})}},60301:(e,s,l)=>{l.r(s),l.d(s,{default:()=>O});var a=l(9950),t=l(471),r=l(1093),n=l(97937),i=l(86781),d=l(68459),c=l(86133),o=l(27081),h=l(63790),x=l(22555),j=l(44268),u=l(584),m=l(90729);const g={1:"Mr.",2:"Miss.",3:"Mrs.",4:"Ms."},A={1:"Male",2:"Female"},p={1:"Yes",2:"No"};var b=l(44414);const v=e=>{let{labelClassName:s,label:l,valueClassName:a,value:t}=e;return(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsxs)("span",{className:s+" fs-5",children:[l,":"]}),(0,b.jsx)("span",{className:a+" fs-5 ms-2",children:null!=t?t.toString():""})]})},_=e=>{let{data:s}=e;return(0,b.jsxs)(u.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-4",children:"A. Applicants:"}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-6",children:"First Applicant:"}),(0,b.jsx)(d.A,{lg:12,children:(0,b.jsx)(v,{label:"Email",value:s.email})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Name",value:g[s.gender_first.toString()]+" "+s.last_name_first+" "+s.first_name_first})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Home Phone ",value:s.home_phone_first})})]}),(0,b.jsx)(i.A,{children:(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Home Phone",value:s.home_phone_second})})})]})},f=e=>{let{data:s}=e;return(0,b.jsxs)(u.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-4",children:"B. Household Composition:"}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-6",children:"First Applicant:"}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Name",value:s.hc_last_name_first+" "+s.hc_first_name_first})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Birth Date",value:s.hc_birth_date_first})}),(0,b.jsx)(d.A,{lg:2,children:(0,b.jsx)(v,{label:"Age",value:s.hc_age_first})}),(0,b.jsx)(d.A,{lg:2,children:(0,b.jsx)(v,{label:"Sex",value:A[s.hc_gender_first]})}),(0,b.jsx)(d.A,{lg:2,children:(0,b.jsx)(v,{label:"Relationship",value:s.hc_relationship_first})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Disability",value:s.hc_disability_first})}),(0,b.jsx)(d.A,{lg:3,className:"p-0",children:(0,b.jsx)(v,{label:"Wheelchair?",value:p[s.hc_wheelchair_first]})})]})]})},N=e=>{let{data:s}=e;return(0,b.jsxs)(u.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-4 ",children:"C. Residency History:"}),(0,b.jsx)(m.A,{className:"fw-bolder fs-6 ms-2",children:"Please list your address(es) for the past 2 years"}),(0,b.jsx)(i.A,{children:(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"How long have you lived in B.C.?",value:s.long_term})})}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-6",children:"Last Address:"}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Address",value:s.rh_address_first})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Start Date",value:s.rh_start_date_first})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"End Date",value:s.rh_end_date_first})}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Landlord Name",value:s.landlord_name_first})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Landlord Phone",value:s.landlord_phone_first})})]}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-6",children:"Second Last Address:"}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Address",value:s.rh_address_second})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Start Date",value:s.rh_start_date_second})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"End Date",value:s.rh_end_date_second})}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Landlord Name",value:s.landlord_name_second})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Landlord Phone",value:s.landlord_phone_second})})]}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-6",children:"Third Last Address:"}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Address",value:s.rh_address_third})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Start Date",value:s.rh_start_date_third})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"End Date",value:s.rh_end_date_third})}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Landlord Name",value:s.landlord_name_third})}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"Landlord Phone",value:s.landlord_phone_third})})]})]})},w=e=>{let{data:s}=e;return(0,b.jsxs)(u.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-4 ",children:"D. Income Information:"}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-6",children:"First Applicant:"}),(0,b.jsx)(d.A,{lg:3,children:(0,b.jsx)(v,{label:"First Name",value:s.ii_last_name_first})}),(0,b.jsx)(d.A,{lg:5,children:(0,b.jsx)(v,{label:"Source",value:s.ii_income_source_first})}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Gross Monthly Income ($)",value:s.ii_income_first})})]})]})},y=e=>{let{data:s}=e;return(0,b.jsxs)(u.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-4 ",children:"E. Assets:"}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Cash/ Bank Balance ($)",value:s.cash_balance})}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Stocks/Bonds/ Term deposits ($)",value:s.stock_deposit})}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Value of Real Estate Owned (list) ($)",value:s.value_real_estate})})]}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(d.A,{lg:8,children:(0,b.jsx)(v,{label:"RRSP\u2019s, Annuities, Mortgages, (held by yourself or household member - list) ($)",value:s.value_morgages})}),(0,b.jsx)(d.A,{lg:4,children:(0,b.jsx)(v,{label:"Other: (i.e. car - list) ($)",value:s.value_others})})]})]})},C=e=>{let{data:s}=e;return(0,b.jsxs)(u.A,{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-4 ",children:"F. Current Accommodation:"}),(0,b.jsx)(i.A,{children:(0,b.jsx)(d.A,{lg:8,children:(0,b.jsx)(v,{label:"Accommodation",value:s.accomodation})})}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(d.A,{lg:6,children:(0,b.jsx)(v,{label:"Please state your current monthly rent: ($)",value:s.monthly_rent})}),(0,b.jsx)(d.A,{lg:6,children:(0,b.jsx)(v,{label:"What does you rent include? (i.e. heat, electricity, cable, - list)",value:s.monthly_includes})})]})]})},k=e=>{let{data:s}=e;return(0,b.jsxs)("div",{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-4 ",children:"G. Reason for Move:"}),(0,b.jsx)(i.A,{children:(0,b.jsx)(d.A,{lg:8,children:(0,b.jsx)(v,{label:"Are you under a Notice to End Tenancy from your present address?",value:p[s.under_notice]})})}),(0,b.jsx)(i.A,{children:(0,b.jsx)(d.A,{lg:12,children:(0,b.jsx)(v,{label:"If you are not under notice, why do you wish to move?",value:s.wish_to_move})})})]})};var S=l(64055),F=l(42074),P=l(32393);const L=e=>{let{data:s}=e;return(0,b.jsxs)("div",{children:[(0,b.jsx)(m.A,{className:"fw-bolder fs-4 ",children:"G. For communications purposes only, please list the languages that you speak."}),(0,b.jsxs)(i.A,{children:[(0,b.jsx)(d.A,{lg:6,children:(0,b.jsx)(v,{label:"First Language",value:s.first_language})}),(0,b.jsx)(d.A,{lg:6,children:(0,b.jsx)(v,{label:"Second Language",value:s.second_language})}),(0,b.jsx)(d.A,{lg:12,children:(0,b.jsx)(S.A.Group,{className:"input-group",children:(0,b.jsx)(v,{label:"If English is NOT your first language, do you have access to a translator?",value:p[s.translator_required]})})})]}),(0,b.jsx)(m.A,{className:"fw-bolder fs-4 ",children:"Document attachment:"}),s.documents.map(((e,s)=>(0,b.jsx)("div",{children:(0,b.jsxs)(F.N_,{to:P.A.BASE_URL+"/"+e.document_name,target:"_blank",children:[" ","Document ",s+1," "]})})))]})};var E=l(96105),B=l(9449),D=l(19443),I=l(68984),H=l(88249);const R=e=>{let{okLabel:s="OK",cancelLabel:l="Cancel",title:t="Assign Flat",submitForm:r,show:i,targetId:d,handleClose:c}=e;const{register:h,handleSubmit:u,setError:m,setValue:g,formState:{errors:A}}=(0,B.mN)({defaultValues:{id:d}}),{flats:p}=(0,o.d4)((e=>({flats:e.Flat.flats}))),[v,_]=(0,a.useState)(""),[f,N]=(0,a.useState)(""),[w,y]=(0,a.useState)(!1),C=(0,o.wA)();(0,a.useEffect)((()=>{C((0,D.qx)()),g("id",d)}),[d]);const k=u((e=>{y(!0),C((0,x.mo)(e)).unwrap().then((e=>{e&&!0===e.status&&(_(e.message),r(10)),y(!1)})).catch((e=>{for(var s in e.errors)try{m(s,{message:e.errors[s].toString()})}catch(l){}y(!1)}))}));return(0,b.jsxs)(j.A,{show:i,onHide:c,backdropClassName:"backdrophigh",className:"backdrop",children:[(0,b.jsx)(j.A.Header,{closeButton:!0,children:(0,b.jsx)(j.A.Title,{children:t})}),(0,b.jsxs)(j.A.Body,{children:[v&&(0,b.jsx)("div",{className:"alert alert-success",children:v}),f&&(0,b.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:f}),(0,b.jsx)("form",{onSubmit:k,children:(0,b.jsxs)("fieldset",{children:[(0,b.jsx)(I.Z,{type:"hidden",name:"id",value:d.toString(),register:h}),(0,b.jsx)(I.Z,{type:"select",label:"Suite",name:"flat_id",containerClass:"mb-3 ",register:h,errors:A,children:p.length&&p.map((e=>(0,b.jsx)("optgroup",{label:e.name.toString(),children:e.flats.map((e=>e.has_occupied?(0,b.jsxs)("option",{value:e.id,disabled:!0,children:[e.name,e.has_occupied]},"flat"+e.id):(0,b.jsxs)("option",{value:e.id,children:[e.name,e.has_occupied]},"flat"+e.id)))},"apartment".concat(e.id))))}),w?(0,b.jsx)(H.m,{}):(0,b.jsx)(n.A,{variant:"primary",type:"submit",className:"waves-effect waves-light me-1",children:"Submit"})]})})]}),(0,b.jsx)(j.A.Footer,{children:(0,b.jsx)(n.A,{variant:"primary",onClick:()=>c(),children:s})})]})},z=e=>{let{okLabel:s="OK",cancelLabel:l="Cancel",title:t="View Application",submitForm:r,show:i,handleClose:d,handleArchive:c,handleUnArchive:o,handleRemove:h,data:x}=e;const[u,m]=(0,a.useState)(!1),[g,A]=(0,a.useState)(!1);return x&&(0,b.jsxs)(j.A,{show:i,onHide:d,className:"print-me",size:"xl",children:[(0,b.jsx)(j.A.Header,{closeButton:!0,children:(0,b.jsx)(j.A.Title,{children:t})}),(0,b.jsxs)(j.A.Body,{children:[(0,b.jsx)(_,{data:x}),(0,b.jsx)(f,{data:x}),(0,b.jsx)(N,{data:x}),(0,b.jsx)(w,{data:x}),(0,b.jsx)(y,{data:x}),(0,b.jsx)(C,{data:x}),(0,b.jsx)(k,{data:x}),(0,b.jsx)(L,{data:x})]}),(0,b.jsxs)(j.A.Footer,{children:[1!==x.status?0===x.status?(0,b.jsx)(n.A,{variant:"primary",onClick:()=>c(),children:"Archive"}):(0,b.jsx)(n.A,{variant:"primary",onClick:()=>o(),children:"Un Archive"}):(0,b.jsx)(b.Fragment,{}),0===x.status?(0,b.jsx)(n.A,{variant:"primary",onClick:()=>A(!0),children:"Accept"}):(0,b.jsx)(b.Fragment,{}),(0,b.jsx)(n.A,{variant:"primary",onClick:()=>d(),children:s}),(0,b.jsx)(n.A,{variant:"primary",onClick:()=>{window.print()},children:"Print"}),1!==x.status?(0,b.jsx)(n.A,{variant:"primary",onClick:()=>{m(!0)},children:"Delete"}):(0,b.jsx)(b.Fragment,{}),(0,b.jsx)(R,{show:g,targetId:x.id,submitForm:e=>{A(!1),d()},handleClose:()=>{A(!1)}}),(0,b.jsx)(E.m,{show:u,targetId:x.id,submitForm:()=>{h(),d(),m(!1)},handleClose:()=>{m(!1)}})]})]})},M=e=>{let{application:s}=e;const l=(0,o.wA)(),[i,d]=(0,a.useState)(!1),[c,h]=(0,a.useState)(!1),[j,u]=(0,a.useState)(null),[m,g]=(0,a.useState)(0),[A,p]=(0,a.useState)(""),[v,_]=(0,a.useState)("");return(0,a.useEffect)((()=>{l((0,x.hz)(1))}),[l,c]),(0,b.jsx)(t.A,{children:(0,b.jsxs)(t.A.Body,{children:[A&&(0,b.jsx)("div",{className:"alert alert-success",children:A}),v&&(0,b.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:v}),(0,b.jsx)("div",{className:"table-responsive",children:(0,b.jsxs)(r.A,{className:"mb-0 table-striped dt-responsive nowrap w-100",children:[(0,b.jsx)("thead",{className:"table-light",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{children:"Id"}),(0,b.jsx)("th",{children:"Email"}),(0,b.jsx)("th",{children:"First Name"}),(0,b.jsx)("th",{children:"Approved By"}),(0,b.jsx)("th",{children:"Created At"}),(0,b.jsx)("th",{children:"Status"}),(0,b.jsx)("th",{children:"Action"})]})}),(0,b.jsx)("tbody",{children:s.data.length>0?s.data.map(((e,s)=>(0,b.jsxs)("tr",{className:"",children:[(0,b.jsx)("td",{children:e.id}),(0,b.jsx)("td",{children:e.email}),(0,b.jsx)("td",{children:e.first_name_first}),(0,b.jsx)("td",{children:e.approved_by?e.approved_by.first_name:""}),(0,b.jsx)("td",{children:e.created_at}),(0,b.jsx)("td",{children:2===e.status?"Archived":1===e.status?"Closed":"Open"}),(0,b.jsx)("td",{children:(0,b.jsx)(a.Fragment,{children:(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(n.A,{className:"btn-secondary",onClick:()=>{h(!0),u(e)},size:"sm",children:"View"})})})})]},s))):(0,b.jsx)("p",{children:"No Data Found"})})]})}),(0,b.jsx)(z,{show:c,data:j,submitForm:()=>{},handleArchive:()=>{null!==j&&void 0!==j&&j.id&&l((0,x.VT)(j.id)).unwrap().then((e=>{p(null===e||void 0===e?void 0:e.message),h(!1)}))},handleUnArchive:()=>{null!==j&&void 0!==j&&j.id&&l((0,x.kB)(j.id)).unwrap().then((e=>{p(null===e||void 0===e?void 0:e.message),h(!1)}))},handleRemove:()=>{null!==j&&void 0!==j&&j.id&&l((0,x.P6)(j.id)).unwrap().then((e=>{p(null===e||void 0===e?void 0:e.message),h(!1)}))},handleClose:()=>h(!1)})]})})},O=()=>{const e=(0,o.wA)(),[s,l]=(0,a.useState)(1),{application:t}=(0,o.d4)((e=>({application:e.Application.application})));return(0,a.useEffect)((()=>{e((0,x.hz)(s))}),[s]),(0,b.jsxs)(a.Fragment,{children:[(0,b.jsx)(c.A,{breadCrumbItems:[{label:"Application",path:"/notice",active:!0}],title:"Application"}),(0,b.jsx)(i.A,{children:(0,b.jsx)(d.A,{lg:12,children:t&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(M,{application:t}),(0,b.jsx)(h.A,{tableProps:{pageCount:t.last_page,state:{pageIndex:t.current_page},pageOptions:{length:t.total},gotoPage:e=>{l(e)}},sizePerPageList:[{text:"10",value:10}]})]})})})]})}}}]);