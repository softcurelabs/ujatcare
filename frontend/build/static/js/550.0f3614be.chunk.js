"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[550],{63112:(e,a,n)=>{n.d(a,{A:()=>l});var t=n(72348),s=n.n(t),r=(n(4434),n(44414));const l=e=>(0,r.jsx)(r.Fragment,{children:e.showTimeSelectOnly?(0,r.jsx)(s(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:"hh:mm",className:"form-control",minDate:e.minDate,scrollableYearDropdown:!0,scrollableMonthYearDropdown:!0,maxDate:e.maxDate,disabled:e.disabled,monthsShown:e.monthsShown,wrapperClassName:"is-invalid",showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"}):(0,r.jsx)(s(),{name:e.name,timeIntervals:e.tI,selected:e.value,onChange:a=>e.onChange(a),showTimeSelect:e.showTimeSelect,timeFormat:"hh:mm a",timeCaption:e.timeCaption,dateFormat:e.dateFormat,minDate:e.minDate,disabled:e.disabled,wrapperClassName:"is-invalid",className:"form-control",maxDate:e.maxDate,showMonthDropdown:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0,monthsShown:e.monthsShown,showTimeSelectOnly:e.showTimeSelectOnly,inline:e.inline,autoComplete:"off"})})},90550:(e,a,n)=>{n.r(a),n.d(a,{default:()=>k});var t=n(9950),s=n(9449),r=n(471),l=n(86781),i=n(68459),o=n(64055),d=n(584),m=n(90729),c=n(86133),u=n(13059),h=n(27081),g=n(28429),x=n(42074),p=n(80183),j=n(68984),v=n(44051),b=n.n(v),_=n(26473),A=n(60666),f=n(63112),w=n(44414);const N=()=>{var e;const a=(0,_.t)(A.Ik().shape({work_requested:A.Yj().required("Please select Work Requested"),tanent_name:A.Yj().required("Please enter tanent name"),phone:A.Yj().required("Please enter phone name"),ok_to_enter:A.Yj().required("Please select ok to enter"),tanent_signature:A.Yj().required().matches(/^data:image\/(?:gif|png|jpeg|bmp|webp|svg\+xml)(?:;charset=utf-8)?;base64,(?:[A-Za-z0-9]|[+/])+={0,2}/,"Signature must be png")})),[n,c]=(0,t.useState)(""),[v,N]=(0,t.useState)(""),[k,S]=(0,t.useState)(!1),[y,C]=(0,t.useState)();let{user:D,customerUser:T}=(0,h.d4)((e=>({user:e.Auth.user,customerUser:e.CustomerAuth.user})));D||(D=T);const Z=(0,s.mN)({defaultValues:{},resolver:a}),{handleSubmit:F,register:L,setError:q,control:O,setValue:I,formState:{errors:R}}=Z,Y=(0,h.wA)();let M=(0,t.useRef)(null),P=(0,t.useRef)(null);const[E,U]=(0,t.useState)(new Date),[W,G]=(0,t.useState)(new Date),[z,B]=(0,t.useState)(new Date);(0,t.useEffect)((()=>{Y((0,p.Tv)(D.user_id)).unwrap().then((e=>{C(e),Y((0,u.Xs)(X.id)).unwrap().then((e=>{var a;if(null!==e){var n,t;if(I("id",e.id),I("tanent_name",null===e||void 0===e?void 0:e.tanent_name),I("work_requested",null===e||void 0===e?void 0:e.work_requested),I("tanent_signature",null===e||void 0===e?void 0:e.tanent_signature),null===(a=M.current)||void 0===a||a.fromDataURL(null===e||void 0===e?void 0:e.tanent_signature),P.current&&P.current.fromDataURL(null===e||void 0===e?void 0:e.service_signature),I("phone",null===e||void 0===e?void 0:e.phone),I("ok_to_enter",null===e||void 0===e?void 0:e.ok_to_enter.toString()),null!==e&&void 0!==e&&e.action_taken&&I("action_taken",null===e||void 0===e?void 0:e.action_taken.toString()),I("work_done",null===e||void 0===e?void 0:e.work_done),I("status",null===e||void 0===e?void 0:e.status.toString()),null!==e&&void 0!==e&&e.chargable&&I("chargable",null===e||void 0===e?void 0:e.chargable.toString()),null!==e&&void 0!==e&&e.action_date&&U(new Date(null===e||void 0===e?void 0:e.action_date)),null!==e&&void 0!==e&&e.time_in&&G(new Date("2024-12-12 "+(null===e||void 0===e?void 0:e.time_in))),null!==e&&void 0!==e&&e.time_out&&G(new Date("2024-12-12 "+(null===e||void 0===e?void 0:e.time_out))),P)null===(n=P.current)||void 0===n||n.off();if(M)null===(t=M.current)||void 0===t||t.off()}})).catch((e=>N(e)))}))}),[D.user_id]);const V=F((async e=>{S(!0),Y((0,u.ag)(e)).unwrap().then((e=>{e&&!0===e.status?(c(e.message),N(""),window.scrollTo({top:0,behavior:"smooth"})):N(null===e||void 0===e?void 0:e.message),S(!1)})).catch((e=>{for(var a in e.errors)try{q(a,{message:e.errors[a].toString()})}catch(n){}S(!1)}))})),X=(0,g.g)();return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(r.A,{children:(0,w.jsxs)(r.A.Body,{children:[n&&(0,w.jsxs)("div",{className:"alert alert-success",children:[n,(0,w.jsx)(x.N_,{to:"/maintanance",children:" Back to Maintanance."})]}),v&&(0,w.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:v}),y&&(0,w.jsxs)("form",{onSubmit:V,children:[(0,w.jsxs)(l.A,{children:[(0,w.jsx)(i.A,{lg:4,children:(0,w.jsxs)(o.A.Group,{className:"mb-3",children:[(0,w.jsx)(o.A.Label,{className:"me-2",children:"Building"}),(0,w.jsx)(o.A.Label,{children:y.user.apartment_name}),(0,w.jsx)(j.Z,{type:"hidden",name:"user_id",value:D.user_id,register:L}),(0,w.jsx)(j.Z,{type:"hidden",name:"id",register:L})]})}),(0,w.jsx)(i.A,{lg:3,children:(0,w.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Apt"}),(0,w.jsx)(o.A.Label,{children:y.user.flat_name}),(0,w.jsx)(j.Z,{type:"hidden",name:"flat_id",value:null===(e=y.user.flat)||void 0===e?void 0:e.flat_id,register:L})]})})]}),(0,w.jsxs)(l.A,{children:[(0,w.jsx)(i.A,{lg:4,children:(0,w.jsx)(j.Z,{label:"Tanent Name",type:"text",register:L,name:"tanent_name",disabled:!0,errors:R,className:"form-control-sm ",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"tanent_name")}),(0,w.jsx)(i.A,{lg:3,children:(0,w.jsx)(j.Z,{label:"Phone",type:"text",register:L,name:"phone",disabled:!0,errors:R,className:"form-control-sm",containerClass:"mb-3 input-group",labelClassName:"me-2",size:2},"phone")}),(0,w.jsx)(i.A,{lg:5,children:(0,w.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Ok to Enter"}),(0,w.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"ok_to_enter",disabled:!0,label:"Yes",value:"1",register:L}),(0,w.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"ok_to_enter",disabled:!0,label:"No",value:"2",register:L})]})})]}),(0,w.jsx)(l.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsx)(j.Z,{type:"textarea",title:"Work Requested",name:"work_requested",placeholder:"Work Requested",className:"mb-3",disabled:!0,register:L,errors:R,style:{height:"100px"}})})}),(0,w.jsx)(l.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsxs)(d.A,{className:"mb-3",children:[(0,w.jsx)(m.A,{className:"me-1 ",children:"Signature"}),(0,w.jsx)(s.xI,{control:O,name:"tanent_signature",render:e=>{let{field:a}=e;return(0,w.jsx)(b(),{ref:M,onEnd:()=>a.onChange((()=>{if(M.current)return M.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,w.jsx)(j.Z,{name:"tanent_signature",register:L,errors:R,className:"is-invalid",type:"hidden"}),R&&R.tanent_signature?(0,w.jsx)(o.A.Control.Feedback,{type:"invalid",children:R.tanent_signature.message}):null]})})}),(0,w.jsx)(l.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Action Taken"}),(0,w.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:L,value:1,disabled:!0,label:"Work Completed"}),(0,w.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"action_taken",value:2,disabled:!0,register:L,label:"Repaired Temporarily"}),(0,w.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:L,value:3,disabled:!0,label:"Parts on Order"}),(0,w.jsx)(j.Z,{type:"radio",className:"form-check-inline",name:"action_taken",register:L,value:4,disabled:!0,label:"Outside Contractor Called"})]})})}),(0,w.jsxs)(l.A,{children:[(0,w.jsx)(i.A,{lg:4,children:(0,w.jsxs)(d.A,{className:"input-group mb-3 ",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Date"}),(0,w.jsx)(j.Z,{type:"hidden",register:L,name:"action_date",value:E.toISOString().split("T")[0]},"action_date"),(0,w.jsx)(f.A,{hideAddon:!0,disabled:!0,value:E,showTimeSelect:!1,inputClass:"form-control-sm",dateFormat:"MM-dd-yyyy",onChange:e=>{U(e),I("action_date",e.toLocaleString("sv-SE"))}})]})}),(0,w.jsx)(i.A,{lg:4,children:(0,w.jsxs)(d.A,{className:"input-group mb-3 ",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time In"}),(0,w.jsx)(j.Z,{type:"hidden",register:L,name:"time_in"},"time_in"),(0,w.jsx)(f.A,{value:W,disabled:!0,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{G(e),I("time_in",W.toLocaleTimeString("it-IT"))}})]})}),(0,w.jsx)(i.A,{lg:4,children:(0,w.jsxs)(d.A,{className:"input-group mb-3 ",children:[(0,w.jsx)(o.A.Label,{htmlFor:"small",className:"me-2",children:"Time Out"}),(0,w.jsx)(j.Z,{type:"hidden",register:L,name:"time_out"},"time_out"),(0,w.jsx)(f.A,{value:z,disabled:!0,showTimeSelect:!0,showTimeSelectOnly:!0,inputClass:"form-control-sm",onChange:e=>{G(e),I("time_out",z.toLocaleTimeString("it-IT"))}})]})})]}),(0,w.jsx)(l.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsx)(j.Z,{type:"textarea",title:"Work Done",name:"work_done",disabled:!0,placeholder:"Work Done",className:"mb-3",register:L,errors:R,style:{height:"125px"}})})}),(0,w.jsx)(l.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsxs)(d.A,{className:"mb-3",children:[(0,w.jsx)(m.A,{className:"me-1 ",children:"Service Person Signature"}),(0,w.jsx)(s.xI,{control:O,name:"service_signature",render:e=>{let{field:a}=e;return(0,w.jsx)(b(),{ref:P,onEnd:()=>a.onChange((()=>{if(P.current)return P.current.toDataURL()})()),penColor:"green",canvasProps:{width:500,height:50,style:{border:"1px solid green"}}})}}),(0,w.jsx)(j.Z,{name:"service_signature",register:L,errors:R,className:"is-invalid",type:"hidden"})]})})}),(0,w.jsx)(l.A,{children:(0,w.jsx)(i.A,{lg:12,children:(0,w.jsxs)(o.A.Group,{className:"mb-3 input-group",children:[(0,w.jsx)(j.Z,{type:"radio",name:"chargable",value:1,register:L,disabled:!0,label:"Chargable to Occupant",className:"form-check-inline"}),(0,w.jsx)(j.Z,{type:"radio",name:"chargable",value:2,disabled:!0,register:L,label:"Management",className:"form-check-inline"})]})})}),(0,w.jsx)(l.A,{children:(0,w.jsx)(i.A,{lg:3})})]})]})})})},k=()=>(0,w.jsxs)(t.Fragment,{children:[(0,w.jsx)(c.A,{breadCrumbItems:[{label:"Dashboard",path:"/dashboard-1"},{label:"Maintanance Create",path:"/maintanance/create",active:!0}],title:"Maintanance Request"}),(0,w.jsx)(l.A,{children:(0,w.jsx)(i.A,{children:(0,w.jsx)(N,{})})})]})}}]);