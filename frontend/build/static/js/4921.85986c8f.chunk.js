"use strict";(self.webpackChunkujatcare=self.webpackChunkujatcare||[]).push([[4921],{63647:(e,s,a)=>{a.d(s,{m:()=>n});var l=a(95252),t=a(44414);const n=()=>(0,t.jsx)(l.A,{animation:"border",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})})},96105:(e,s,a)=>{a.d(s,{m:()=>r});var l=a(44268),t=a(97937),n=a(44414);const r=e=>{let{okLabel:s="OK",cancelLabel:a="Cancel",title:r="Confirmation",submitForm:i,show:c,targetId:d,handleClose:o}=e;return(0,n.jsxs)(l.A,{show:c,onHide:o,children:[(0,n.jsx)(l.A.Header,{closeButton:!0,children:(0,n.jsx)(l.A.Title,{children:r})}),(0,n.jsx)(l.A.Body,{children:"Do you really want to submit?"}),(0,n.jsxs)(l.A.Footer,{children:[(0,n.jsx)(t.A,{variant:"secondary",onClick:o,children:a}),(0,n.jsx)(t.A,{variant:"primary",onClick:()=>i(d),children:s})]})]})}},80730:(e,s,a)=>{a.d(s,{A:()=>m});var l=a(9950),t=a(42074),n=a(471),r=a(86781),i=a(68459),c=a(36275),d=a(44414);const o=e=>{const[s,a]=(0,l.useState)([]),o=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";const a=s<0?0:s,l=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,l)).toFixed(a))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][l]};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(c.Ay,{...e,onDrop:l=>(l=>{var t=l;e.showPreview&&((l||[]).map((e=>Object.assign(e,{preview:"image"===e.type.split("/")[0]?URL.createObjectURL(e):null,formattedSize:o(e.size)}))),(t=s).push(...l),a(t)),e.onFileUpload&&e.onFileUpload(t)})(l),children:s=>{let{getRootProps:a,getInputProps:l}=s;return(0,d.jsx)("div",{className:"dropzone",children:(0,d.jsxs)("div",{className:"dz-message needsclick",...a(),children:[(0,d.jsx)("input",{...l()}),(0,d.jsx)("i",{className:"h3 text-muted dripicons-cloud-upload"}),(0,d.jsx)("h4",{children:e.title?e.title:"Drop Image or Document here or click to upload."}),(0,d.jsx)("span",{className:"text-muted font-13"})]})})}}),e.showPreview&&(0,d.jsx)("div",{className:"dropzone-previews mt-3",id:"uploadPreviewTemplate",children:(s||[]).map(((l,c)=>(0,d.jsx)(n.A,{className:"mt-1 mb-0 shadow-none border",children:(0,d.jsx)("div",{className:"p-2",children:(0,d.jsxs)(r.A,{className:"align-items-center",children:[l.preview&&(0,d.jsx)(i.A,{className:"col-auto",children:(0,d.jsx)("img",{"data-dz-thumbnail":"",className:"avatar-sm rounded bg-light",alt:l.name,src:l.preview})}),!l.preview&&(0,d.jsx)(i.A,{className:"col-auto",children:(0,d.jsx)("div",{className:"avatar-sm",children:(0,d.jsx)("span",{className:"avatar-title bg-primary rounded",children:l.type.split("/")[0]})})}),(0,d.jsxs)(i.A,{className:"ps-0",children:[(0,d.jsx)(t.N_,{to:"#",className:"text-muted fw-bold",children:l.name}),(0,d.jsx)("p",{className:"mb-0",children:(0,d.jsx)("strong",{children:l.formattedSize})})]}),(0,d.jsx)(i.A,{className:"text-end",children:(0,d.jsx)(t.N_,{to:"#",className:"btn btn-link btn-lg text-muted shadow-none",children:(0,d.jsx)("i",{className:"dripicons-cross",onClick:()=>(l=>{const t=[...s];t.splice(l,1),a(t),e.onFileUpload&&e.onFileUpload(t)})(c)})})})]})})},c+"-file")))})]})};o.defaultProps={showPreview:!0};const m=o},41033:(e,s,a)=>{a.d(s,{A:()=>i});a(9950);var l=a(86781),t=a(68459),n=a(81924),r=a(44414);const i=e=>(0,r.jsx)(l.A,{children:(0,r.jsx)(t.A,{children:(0,r.jsxs)("div",{className:"page-title-box",children:[(0,r.jsx)("div",{className:"page-title-right",children:(0,r.jsxs)(n.A,{className:"m-0",children:[(0,r.jsx)(n.A.Item,{href:"/",children:"Home"}),(e.breadCrumbItems||[]).map(((e,s)=>e.active?(0,r.jsx)(n.A.Item,{active:!0,children:e.label},s):(0,r.jsx)(n.A.Item,{href:e.path,children:e.label},s)))]})}),(0,r.jsx)("h4",{className:"page-title",children:e.title})]})})})},63790:(e,s,a)=>{a.d(s,{A:()=>c});var l=a(9950),t=a(42074),n=a(48738),r=a.n(n),i=a(44414);const c=e=>{let{tableProps:s,sizePerPageList:a}=e;const[n,c]=(0,l.useState)(s.pageCount),[d,o]=(0,l.useState)(s.state.pageIndex);(0,l.useEffect)((()=>{c(s.pageCount),o(s.state.pageIndex)}),[s.pageCount,s.state.pageIndex]);const m=(0,l.useCallback)(((e,s)=>e.filter((e=>e<=n))),[n]),h=(0,l.useCallback)(((e,s)=>s<7?m([1,2,3,4,5,6],s):e%5>=0&&e>4&&e+2<s?[1,e-1,e,e+1,s]:e%5>=0&&e>4&&e+2>=s?[1,s-3,s-2,s-1,s]:[1,2,3,4,5,s]),[m]),x=e=>{if(e===d)return;const a=h(e,n);p(m(a,n)),s.gotoPage(e)};(0,l.useEffect)((()=>{const e=h(null,n);p(e)}),[n,h]);const[u,p]=(0,l.useState)(h(null,n)),j=d;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"d-lg-flex align-items-center text-center pb-1",children:[a.length>0&&(0,i.jsxs)("div",{className:"d-inline-block me-3",children:[(0,i.jsx)("label",{className:"me-1",children:"Display :"}),(0,i.jsx)("select",{value:s.state.pageSize,onChange:e=>{s.setPageSize(Number(e.target.value))},className:"form-select d-inline-block w-auto",children:(a||[]).map(((e,s)=>(0,i.jsx)("option",{value:e.value,children:e.text},s)))})]}),(0,i.jsxs)("span",{className:"me-3",children:["Page"," ",(0,i.jsxs)("strong",{children:[d," of ",s.pageOptions.length]})," "]}),(0,i.jsxs)("ul",{className:"pagination pagination-rounded d-inline-flex ms-auto align-item-center mb-0",children:[(0,i.jsx)("li",{className:r()("page-item","paginate_button","previous",{disabled:1===j}),onClick:()=>{1!==j&&x(j-1)},children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:(0,i.jsx)("i",{className:"mdi mdi-chevron-left"})})},"prevpage"),(u||[]).map(((e,s,a)=>a[s-1]+1<e?(0,i.jsxs)(l.Fragment,{children:[(0,i.jsx)("li",{className:"page-item disabled d-none d-xl-inline-block",children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:"..."})}),(0,i.jsx)("li",{className:r()("page-item","d-none","d-xl-inline-block",{active:j===e}),onClick:s=>x(e),children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:e})})]},e):(0,i.jsx)("li",{className:r()("page-item","d-none","d-xl-inline-block",{active:j===e}),onClick:s=>x(e),children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:e})},e))),(0,i.jsx)("li",{className:r()("page-item","paginate_button","next",{disabled:j===s.pageCount}),onClick:()=>{j!==s.pageCount&&x(j+1)},children:(0,i.jsx)(t.N_,{to:"#",className:"page-link",children:(0,i.jsx)("i",{className:"mdi mdi-chevron-right"})})},"nextpage")]})]})})}},68984:(e,s,a)=>{a.d(s,{Z:()=>h,z:()=>r});var l=a(9950),t=a(9449),n=a(44414);const r=e=>{let{defaultValues:s,resolver:a,children:r,onSubmit:i,formClass:c}=e;const d=(0,t.mN)({defaultValues:s,resolver:a}),{handleSubmit:o,register:m,control:h,formState:{errors:x}}=d;return(0,n.jsx)("form",{onSubmit:o(i),className:c,noValidate:!0,children:Array.isArray(r)?r.map((e=>e.props&&e.props.name?l.createElement(e.type,{...{...e.props,register:m,key:e.props.name,errors:x,control:h}}):e)):r})};var i=a(75623),c=a(64055),d=a(48738),o=a.n(d);const m=e=>{let{name:s,placeholder:a,refCallback:t,errors:r,control:d,register:m,className:h}=e;const[x,u]=(0,l.useState)(!1);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(i.A,{className:"mb-0",children:[(0,n.jsx)(c.A.Control,{type:x?"text":"password",placeholder:a,name:s,id:s,as:"input",ref:e=>{t&&t(e)},className:h,isInvalid:!(!r||!r[s]),...m?m(s):{},autoComplete:s}),(0,n.jsx)("div",{className:o()("input-group-text","input-group-password",{"show-password":x}),"data-password":x?"true":"false",children:(0,n.jsx)("span",{className:"password-eye",onClick:()=>{u(!x)}})})]})})},h=e=>{let{label:s,type:a,name:l,placeholder:t,register:r,errors:i,control:d,className:o,labelClassName:h,containerClass:x,refCallback:u,children:p,rows:j,prefix:g,...N}=e;const b="textarea"===a?"textarea":"select"===a?"select":"input";return(0,n.jsx)(n.Fragment,{children:"hidden"===a?(0,n.jsx)("input",{type:a,name:l,id:l,...r?r(l):{},...N,className:o}):(0,n.jsx)(n.Fragment,{children:"password"===a?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(c.A.Group,{className:x,children:[s?(0,n.jsxs)(n.Fragment,{children:[" ",(0,n.jsx)(c.A.Label,{className:h,children:s})," ",p," "]}):null,(0,n.jsx)(m,{name:l,placeholder:t,refCallback:u,errors:i,register:r,className:o}),i&&i[l]?(0,n.jsx)(c.A.Control.Feedback,{type:"invalid",className:"d-block",children:i[l].message}):null]})}):(0,n.jsx)(n.Fragment,{children:"checkbox"===a||"radio"===a?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(c.A.Group,{className:x,children:[(0,n.jsx)(c.A.Check,{type:a,label:s,name:l,id:l,ref:e=>{u&&u(e)},className:o,isInvalid:!(!i||!i[l]),...r?r(l):{},...N}),i&&i[l]?(0,n.jsx)(c.A.Control.Feedback,{type:"invalid",children:i[l].message}):null]})}):(0,n.jsxs)(c.A.Group,{className:x,children:[s?(0,n.jsx)(c.A.Label,{className:h,children:s}):null,g?(0,n.jsx)("span",{className:"input-group-text",id:l,children:g}):(0,n.jsx)(n.Fragment,{}),(0,n.jsx)(c.A.Control,{type:a,placeholder:t,name:l,id:l,as:b,ref:e=>{u&&u(e)},className:o,isInvalid:!(!i||!i[l]),...r?r(l):{},rows:j,...N,autoComplete:l,children:p||null}),i&&i[l]?(0,n.jsx)(c.A.Control.Feedback,{type:"invalid",children:i[l].message}):null]})})})})}},55747:(e,s,a)=>{a.d(s,{A:()=>j});var l=a(9950),t=a(44268),n=a(90729),r=a(97937),i=a(60666),c=a(26473),d=a(9449),o=a(80730),m=a(27081),h=a(80183),x=a(42074),u=a(63647),p=a(44414);const j=e=>{let{show:s,onHide:a,onSubmit:j}=e;const g=(0,c.t)(i.Ik().shape({})),N=(0,m.wA)(),[b,v]=(0,l.useState)(""),[f,A]=(0,l.useState)(!1),[k,w]=(0,l.useState)(""),{register:C,handleSubmit:y,setValue:S,setError:F,control:I,formState:{errors:P}}=(0,d.mN)({defaultValues:{},resolver:g}),_=y((e=>{A(!0),v(""),w(""),N((0,h.xY)(e)).unwrap().then((e=>{e&&!0===e.status&&(v(e.message),w(e.errors)),A(!1)})).catch((e=>{w(e.message),v(""),A(!1)}))}));return(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)(t.A,{show:s,onHide:a,"aria-labelledby":"contained-modal-title-vcenter",centered:!0,dialogClassName:"modal-xl",children:[(0,p.jsx)(t.A.Header,{className:"bg-light",onHide:a,closeButton:!0,children:(0,p.jsx)(t.A.Title,{className:"m-0",children:"Import Tenants"})}),(0,p.jsxs)(t.A.Body,{className:"p-4",children:[(0,p.jsxs)(n.A,{children:["Sample user import:"," ",(0,p.jsx)(x.N_,{to:"/users.xlsx",target:"_blank",children:"Download"})]}),b&&(0,p.jsx)("div",{className:"alert alert-success",children:b}),k&&(0,p.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",dangerouslySetInnerHTML:{__html:k}}),(0,p.jsxs)("form",{onSubmit:_,children:[(0,p.jsx)(d.xI,{render:()=>(0,p.jsx)(o.A,{maxFiles:1,onFileUpload:e=>{S("users",e[0])}}),name:"users",control:I}),(0,p.jsxs)("div",{className:"text-end mt-2",children:[f?(0,p.jsx)(u.m,{}):(0,p.jsx)(r.A,{variant:"success",type:"submit",className:"waves-effect waves-light me-1",children:"Save"}),(0,p.jsx)(r.A,{variant:"danger",className:"waves-effect waves-light",onClick:a,children:"Exit"})]})]})]})]})})}},14921:(e,s,a)=>{a.r(s),a.d(s,{default:()=>w});var l=a(9950),t=a(471),n=a(1093),r=a(72530),i=a(86781),c=a(68459),d=a(97937),o=a(41033),m=a(28429),h=a(27081),x=a(63790),u=a(96105),p=a(80183),j=a(55747),g=a(68984),N=a(19443),b=a(48738),v=a.n(b),f=a(42074),A=a(44414);const k=e=>{let{users:s,page:a,filter:i}=e;const[c,d]=(0,l.useState)(!1),[o,m]=(0,l.useState)(0),x=(0,h.wA)(),[j,g]=(0,l.useState)(""),[N,b]=(0,l.useState)("");(0,l.useEffect)((()=>{x((0,p.bG)({page:a,filter:i}))}),[c,i]);return(0,A.jsx)(t.A,{children:(0,A.jsxs)(t.A.Body,{children:[j&&(0,A.jsx)("div",{className:"alert alert-success",children:j}),N&&(0,A.jsx)("div",{className:"alert alert-danger mt-3",role:"alert",children:N}),(0,A.jsxs)("div",{className:"table-responsive",children:[(0,A.jsxs)(n.A,{className:"mb-0 table-striped dt-responsive nowrap w-100",children:[(0,A.jsx)("thead",{className:"table-light",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{children:"Suite"}),(0,A.jsx)("th",{children:"Apartment"}),(0,A.jsx)("th",{children:"Name"}),(0,A.jsx)("th",{children:"Email"}),(0,A.jsx)("th",{children:"Phone"}),(0,A.jsx)("th",{children:"Quickbook Sync"}),(0,A.jsx)("th",{children:"Actions"})]})}),(0,A.jsx)("tbody",{children:s&&s.data.length>0?s.data.map(((e,s)=>(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{children:e.user.flat_name}),(0,A.jsx)("td",{children:e.user.apartment_name}),(0,A.jsx)("td",{children:e.user.name}),(0,A.jsx)("td",{children:e.user.email}),(0,A.jsx)("td",{children:e.phone_number}),(0,A.jsx)("td",{children:(0,A.jsx)("h5",{children:(0,A.jsx)("span",{className:v()("badge",{"bg-success":null!==e.quickbook_id,"bg-warning":null===e.quickbook_id}),children:e.quickbook_id?"Syced":"Not Synced"})})}),(0,A.jsx)("td",{children:(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)(r.A,{className:"btn-group",align:"end",children:[(0,A.jsx)(r.A.Toggle,{variant:"light",className:"table-action-btn btn-sm",children:(0,A.jsx)("i",{className:"mdi mdi-dots-horizontal"})}),(0,A.jsxs)(r.A.Menu,{children:[(0,A.jsxs)(r.A.Item,{href:"assign-permission/".concat(e.user.id),children:[(0,A.jsx)("i",{className:"mdi mdi-pencil me-2 text-muted font-18 vertical-middle"}),"Manage Permission"]}),(0,A.jsxs)(r.A.Item,{href:"user/".concat(e.user.id),children:[(0,A.jsx)("i",{className:"mdi mdi-check-all me-2 text-muted font-18 vertical-middle"}),"Edit Profile"]}),(0,A.jsxs)(r.A.Item,{onClick:()=>{m(e.user.id),d(!0)},children:[(0,A.jsx)("i",{className:"mdi mdi-delete me-2 text-muted font-18 vertical-middle"}),"Delete Profile"]})]})]}),(0,A.jsxs)(f.N_,{to:"#",onClick:()=>(e=>{g(""),b(""),x((0,p.eZ)(e)).unwrap().then((e=>{e&&!0===e.status?(g(e.message),x((0,p.bG)({page:a,filter:i}))):b(e.message)})).catch((e=>{b(e.message)}))})(e.user.id),"aria-disabled":!0,className:"action-icon",title:"Sync with Quickbook",children:[" ",(0,A.jsx)("i",{className:"mdi mdi-sync"})]})]})})]},s))):(0,A.jsx)("p",{children:"No Data Found"})})]}),(0,A.jsx)(u.m,{show:c,targetId:o,submitForm:e=>{x((0,p.BN)(e)).unwrap().then((e=>{e&&!0===e.status&&(g(e.message),d(!1))})).catch((e=>{b(e.message),d(!1)}))},handleClose:()=>d(!1)})]})]})})},w=()=>{const e=(0,h.wA)(),[s,a]=(0,l.useState)(1),[t,n]=(0,l.useState)(!1),[r,u]=(0,l.useState)(""),{users:b,flats:v}=(0,h.d4)((e=>({users:e.User.users,flats:e.Flat.flats})));(0,l.useEffect)((()=>{e((0,N.q)())}),[]);let f=(0,m.Zp)();return(0,l.useEffect)((()=>{e((0,p.bG)({page:s,filter:r}))}),[s,t]),(0,A.jsxs)(l.Fragment,{children:[(0,A.jsx)(o.A,{breadCrumbItems:[{label:"Tenants",path:"/user",active:!0}],title:"Tenants"}),(0,A.jsx)(i.A,{children:(0,A.jsxs)(c.A,{lg:12,children:[(0,A.jsxs)(i.A,{children:[(0,A.jsxs)(c.A,{lg:8,children:[(0,A.jsxs)(d.A,{className:"waves-effect waves-light mb-3 me-3",onClick:()=>{f("/user-resident/new")},children:[(0,A.jsx)("i",{className:"mdi mdi-plus-circle me-1"})," Add New"]}),(0,A.jsxs)(d.A,{className:"waves-effect waves-light mb-3",onClick:()=>{n(!0)},children:[(0,A.jsx)("i",{className:"mdi mdi-plus-circle me-1"})," Import Tenants"]})]}),(0,A.jsx)(c.A,{lg:4,children:(0,A.jsxs)(g.Z,{type:"select",name:"apartment-selection",onChange:e=>u(e.target.value),label:"Filter",containerClass:"d-flex",className:"mb-2 ms-2 form-check-inline",children:[(0,A.jsx)("option",{value:"",children:"Select Apartment"}),v.length&&v.map((e=>(0,A.jsx)("option",{value:"".concat(e.id),children:e.name.toString()},"apartment".concat(e.id))))]})})]}),b&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(k,{users:b,page:s,filter:r}),(0,A.jsx)(x.A,{tableProps:{pageCount:b.last_page,state:{pageIndex:b.current_page},pageOptions:{length:b.total},gotoPage:e=>{a(e)}},sizePerPageList:[{text:"10",value:10}]})]}),(0,A.jsx)(j.A,{show:t,onHide:()=>{n(!1)},onSubmit:()=>{n(!1)}})]})})]})}}}]);